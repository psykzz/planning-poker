(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[230],{8:function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},7757:function(e,t,r){e.exports=r(3076)},4944:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,a="ArrayBuffer"in e;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function v(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,r,n=d(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=p(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=u(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[u(e)]},h.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},h.prototype.set=function(e,t){this.map[u(e)]=l(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var r,n,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),g.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function k(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];k.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(E){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function T(e,r){return new Promise((function(n,i){var a=new b(e,r);if(a.signal&&a.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e,t,r={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new k(o,r))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}T.polyfill=!0,e.fetch||(e.fetch=T,e.Headers=h,e.Request=b,e.Response=k),t.Headers=h,t.Request=b,t.Response=k,t.fetch=T,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},6218:function(e,t,r){r(5743);var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},2993:function(e){var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,o="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,c,u,l;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(c=s;0!=c--;)if(!i(e[c],a[c]))return!1;return!0}if(r&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(l=e.entries();!(c=l.next()).done;)if(!a.has(c.value[0]))return!1;for(l=e.entries();!(c=l.next()).done;)if(!i(c.value[1],a.get(c.value[0])))return!1;return!0}if(n&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(l=e.entries();!(c=l.next()).done;)if(!a.has(c.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(c=s;0!=c--;)if(e[c]!==a[c])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((s=(u=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(c=s;0!=c--;)if(!Object.prototype.hasOwnProperty.call(a,u[c]))return!1;if(t&&e instanceof Element)return!1;for(c=s;0!=c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!e.$$typeof)&&!i(e[u[c]],a[u[c]]))return!1;return!0}return e!=e&&a!=a}e.exports=function(e,t){try{return i(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}},4839:function(e,t,r){"use strict";var n,o=r(7294),i=(n=o)&&"object"==typeof n&&"default"in n?n.default:n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var c,u=[];function l(){c=e(u.map((function(e){return e.props}))),f.canUseDOM?t(c):r&&(c=r(c))}var f=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.peek=function(){return c},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=c;return c=void 0,u=[],e};var a=o.prototype;return a.UNSAFE_componentWillMount=function(){u.push(this),l()},a.componentDidUpdate=function(){l()},a.componentWillUnmount=function(){var e=u.indexOf(this);u.splice(e,1),l()},a.render=function(){return i.createElement(n,this.props)},o}(o.PureComponent);return a(f,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),a(f,"canUseDOM",s),f}}},2960:function(e,t,r){var n;if(r(5743),"object"==typeof globalThis)n=globalThis;else try{n=r(6218)}catch(s){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,i=r(7284);function a(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(a,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?a:null,version:i}},7284:function(e,t,r){e.exports=r(9794).version},9662:function(e,t,r){var n=r(614),o=r(6330);e.exports=function(e){if(n(e))return e;throw TypeError(o(e)+" is not a function")}},9670:function(e,t,r){var n=r(111);e.exports=function(e){if(n(e))return e;throw TypeError(String(e)+" is not an object")}},1318:function(e,t,r){var n=r(5656),o=r(1400),i=r(6244),a=function(e){return function(t,r,a){var s,c=n(t),u=i(c),l=o(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4326:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9920:function(e,t,r){var n=r(2597),o=r(3887),i=r(1236),a=r(3070);e.exports=function(e,t){for(var r=o(t),s=a.f,c=i.f,u=0;u<r.length;u++){var l=r[u];n(e,l)||s(e,l,c(t,l))}}},8880:function(e,t,r){var n=r(9781),o=r(3070),i=r(9114);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9781:function(e,t,r){var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,r){var n=r(7854),o=r(111),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},8113:function(e,t,r){var n=r(5005);e.exports=n("navigator","userAgent")||""},7392:function(e,t,r){var n,o,i=r(7854),a=r(8113),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l?o=(n=l.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,r){var n=r(7854),o=r(1236).f,i=r(8880),a=r(1320),s=r(3505),c=r(9920),u=r(4705);e.exports=function(e,t){var r,l,f,h,d,p=e.target,v=e.global,m=e.stat;if(r=v?n:m?n[p]||s(p,{}):(n[p]||{}).prototype)for(l in t){if(h=t[l],f=e.noTargetGet?(d=o(r,l))&&d.value:r[l],!u(v?l:p+(m?".":"#")+l,e.forced)&&void 0!==f){if(typeof h==typeof f)continue;c(h,f)}(e.sham||f&&f.sham)&&i(h,"sham",!0),a(r,l,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},6530:function(e,t,r){var n=r(9781),o=r(2597),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!n||n&&a(i,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},5005:function(e,t,r){var n=r(7854),o=r(614),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e]):n[e]&&n[e][t]}},8173:function(e,t,r){var n=r(9662);e.exports=function(e,t){var r=e[t];return null==r?void 0:n(r)}},7854:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:function(e,t,r){var n=r(7908),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,r){var n=r(9781),o=r(7293),i=r(317);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,r){var n=r(7293),o=r(4326),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},2788:function(e,t,r){var n=r(614),o=r(5465),i=Function.toString;n(o.inspectSource)||(o.inspectSource=function(e){return i.call(e)}),e.exports=o.inspectSource},9909:function(e,t,r){var n,o,i,a=r(8536),s=r(7854),c=r(111),u=r(8880),l=r(2597),f=r(5465),h=r(6200),d=r(3501),p="Object already initialized",v=s.WeakMap;if(a||f.state){var m=f.state||(f.state=new v),y=m.get,g=m.has,b=m.set;n=function(e,t){if(g.call(m,e))throw new TypeError(p);return t.facade=e,b.call(m,e,t),t},o=function(e){return y.call(m,e)||{}},i=function(e){return g.call(m,e)}}else{var w=h("state");d[w]=!0,n=function(e,t){if(l(e,w))throw new TypeError(p);return t.facade=e,u(e,w,t),t},o=function(e){return l(e,w)?e[w]:{}},i=function(e){return l(e,w)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},614:function(e){e.exports=function(e){return"function"==typeof e}},4705:function(e,t,r){var n=r(7293),o=r(614),i=/#|\.prototype\./,a=function(e,t){var r=c[s(e)];return r==l||r!=u&&(o(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},111:function(e,t,r){var n=r(614);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},1913:function(e){e.exports=!1},2190:function(e,t,r){var n=r(614),o=r(5005),i=r(3307);e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return n(t)&&Object(e)instanceof t}},6244:function(e,t,r){var n=r(7466);e.exports=function(e){return n(e.length)}},133:function(e,t,r){var n=r(7392),o=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:function(e,t,r){var n=r(7854),o=r(614),i=r(2788),a=n.WeakMap;e.exports=o(a)&&/native code/.test(i(a))},3070:function(e,t,r){var n=r(9781),o=r(4664),i=r(9670),a=r(4948),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t),i(r),o)try{return s(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:function(e,t,r){var n=r(9781),o=r(5296),i=r(9114),a=r(5656),s=r(4948),c=r(2597),u=r(4664),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=s(t),u)try{return l(e,t)}catch(r){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},8006:function(e,t,r){var n=r(6324),o=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},6324:function(e,t,r){var n=r(2597),o=r(5656),i=r(1318).indexOf,a=r(3501);e.exports=function(e,t){var r,s=o(e),c=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(u,r)||u.push(r));return u}},5296:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2140:function(e,t,r){var n=r(614),o=r(111);e.exports=function(e,t){var r,i;if("string"===t&&n(r=e.toString)&&!o(i=r.call(e)))return i;if(n(r=e.valueOf)&&!o(i=r.call(e)))return i;if("string"!==t&&n(r=e.toString)&&!o(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},3887:function(e,t,r){var n=r(5005),o=r(8006),i=r(5181),a=r(9670);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},1320:function(e,t,r){var n=r(7854),o=r(614),i=r(2597),a=r(8880),s=r(3505),c=r(2788),u=r(9909),l=r(6530).CONFIGURABLE,f=u.get,h=u.enforce,d=String(String).split("String");(e.exports=function(e,t,r,c){var u,f=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:t;o(r)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(r,"name")||l&&r.name!==m)&&a(r,"name",m),(u=h(r)).source||(u.source=d.join("string"==typeof m?m:""))),e!==n?(f?!v&&e[t]&&(p=!0):delete e[t],p?e[t]=r:a(e,t,r)):p?e[t]=r:s(t,r)})(Function.prototype,"toString",(function(){return o(this)&&f(this).source||c(this)}))},4488:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:function(e,t,r){var n=r(7854);e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},6200:function(e,t,r){var n=r(2309),o=r(9711),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5465:function(e,t,r){var n=r(7854),o=r(3505),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},2309:function(e,t,r){var n=r(1913),o=r(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.3",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},1400:function(e,t,r){var n=r(9303),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},5656:function(e,t,r){var n=r(8361),o=r(4488);e.exports=function(e){return n(o(e))}},9303:function(e){var t=Math.ceil,r=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?r:t)(n)}},7466:function(e,t,r){var n=r(9303),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},7908:function(e,t,r){var n=r(4488);e.exports=function(e){return Object(n(e))}},7593:function(e,t,r){var n=r(111),o=r(2190),i=r(8173),a=r(2140),s=r(5112)("toPrimitive");e.exports=function(e,t){if(!n(e)||o(e))return e;var r,c=i(e,s);if(c){if(void 0===t&&(t="default"),r=c.call(e,t),!n(r)||o(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,r){var n=r(7593),o=r(2190);e.exports=function(e){var t=n(e,"string");return o(t)?t:String(t)}},6330:function(e){e.exports=function(e){try{return String(e)}catch(t){return"Object"}}},9711:function(e){var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},3307:function(e,t,r){var n=r(133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(e,t,r){var n=r(7854),o=r(2309),i=r(2597),a=r(9711),s=r(133),c=r(3307),u=o("wks"),l=n.Symbol,f=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(u,e)&&(s||"string"==typeof u[e])||(s&&i(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},5837:function(e,t,r){r(2109)({global:!0},{globalThis:r(7854)})},5743:function(e,t,r){r(5837)},2887:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return wn}});var n=r(7294);var o=r(2982);function i(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,c,"next",e)}function c(e){i(a,n,o,s,c,"throw",e)}s(void 0)}))}}var s,c,u,l,f=r(7757),h=r.n(f),d=r(5697),p=r.n(d),v=r(4839),m=r.n(v),y=r(2993),g=r.n(y),b=r(6494),w=r.n(b),k="bodyAttributes",x="htmlAttributes",T="titleAttributes",E={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},_=(Object.keys(E).map((function(e){return E[e]})),"charset"),O="cssText",S="href",j="http-equiv",P="innerHTML",C="itemprop",A="name",R="property",I="rel",N="src",L="target",U={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},D="defaultTitle",B="defer",M="encodeSpecialCharacters",F="onChangeClientState",H="titleTemplate",z=Object.keys(U).reduce((function(e,t){return e[U[t]]=t,e}),{}),G=[E.NOSCRIPT,E.SCRIPT,E.STYLE],q="data-react-helmet",J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},X=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Q=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},$=function(e){var t=ne(e,E.TITLE),r=ne(e,H);if(r&&t)return r.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var n=ne(e,D);return t||n||void 0},Z=function(e){return ne(e,F)||function(){}},ee=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return K({},e,t)}),{})},te=function(e,t){return t.filter((function(e){return void 0!==e[E.BASE]})).map((function(e){return e[E.BASE]})).reverse().reduce((function(t,r){if(!t.length)for(var n=Object.keys(r),o=0;o<n.length;o++){var i=n[o].toLowerCase();if(-1!==e.indexOf(i)&&r[i])return t.concat(r)}return t}),[])},re=function(e,t,r){var n={};return r.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&ce("Helmet: "+e+' should be of type "Array". Instead found type "'+J(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,r){var o={};r.filter((function(e){for(var r=void 0,i=Object.keys(e),a=0;a<i.length;a++){var s=i[a],c=s.toLowerCase();-1===t.indexOf(c)||r===I&&"canonical"===e[r].toLowerCase()||c===I&&"stylesheet"===e[c].toLowerCase()||(r=c),-1===t.indexOf(s)||s!==P&&s!==O&&s!==C||(r=s)}if(!r||!e[r])return!1;var u=e[r].toLowerCase();return n[r]||(n[r]={}),o[r]||(o[r]={}),!n[r][u]&&(o[r][u]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var i=Object.keys(o),a=0;a<i.length;a++){var s=i[a],c=w()({},n[s],o[s]);n[s]=c}return e}),[]).reverse()},ne=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},oe=(s=Date.now(),function(e){var t=Date.now();t-s>16?(s=t,e(t)):setTimeout((function(){oe(e)}),0)}),ie=function(e){return clearTimeout(e)},ae="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||oe:r.g.requestAnimationFrame||oe,se="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||ie:r.g.cancelAnimationFrame||ie,ce=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},ue=null,le=function(e,t){var r=e.baseTag,n=e.bodyAttributes,o=e.htmlAttributes,i=e.linkTags,a=e.metaTags,s=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,l=e.styleTags,f=e.title,h=e.titleAttributes;de(E.BODY,n),de(E.HTML,o),he(f,h);var d={baseTag:pe(E.BASE,r),linkTags:pe(E.LINK,i),metaTags:pe(E.META,a),noscriptTags:pe(E.NOSCRIPT,s),scriptTags:pe(E.SCRIPT,u),styleTags:pe(E.STYLE,l)},p={},v={};Object.keys(d).forEach((function(e){var t=d[e],r=t.newTags,n=t.oldTags;r.length&&(p[e]=r),n.length&&(v[e]=d[e].oldTags)})),t&&t(),c(e,p,v)},fe=function(e){return Array.isArray(e)?e.join(""):e},he=function(e,t){void 0!==e&&document.title!==e&&(document.title=fe(e)),de(E.TITLE,t)},de=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(q),o=n?n.split(","):[],i=[].concat(o),a=Object.keys(t),s=0;s<a.length;s++){var c=a[s],u=t[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),-1===o.indexOf(c)&&o.push(c);var l=i.indexOf(c);-1!==l&&i.splice(l,1)}for(var f=i.length-1;f>=0;f--)r.removeAttribute(i[f]);o.length===i.length?r.removeAttribute(q):r.getAttribute(q)!==a.join(",")&&r.setAttribute(q,a.join(","))}},pe=function(e,t){var r=document.head||document.querySelector(E.HEAD),n=r.querySelectorAll(e+"["+"data-react-helmet]"),o=Array.prototype.slice.call(n),i=[],a=void 0;return t&&t.length&&t.forEach((function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===P)r.innerHTML=t.innerHTML;else if(n===O)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var s=void 0===t[n]?"":t[n];r.setAttribute(n,s)}r.setAttribute(q,"true"),o.some((function(e,t){return a=t,r.isEqualNode(e)}))?o.splice(a,1):i.push(r)})),o.forEach((function(e){return e.parentNode.removeChild(e)})),i.forEach((function(e){return r.appendChild(e)})),{oldTags:o,newTags:i}},ve=function(e){return Object.keys(e).reduce((function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n}),"")},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[U[r]||r]=e[r],t}),t)},ye=function(e,t,r){switch(e){case E.TITLE:return{toComponent:function(){return e=t.title,r=t.titleAttributes,(o={key:e})[q]=!0,i=me(r,o),[n.createElement(E.TITLE,i,e)];var e,r,o,i},toString:function(){return function(e,t,r,n){var o=ve(r),i=fe(t);return o?"<"+e+' data-react-helmet="true" '+o+">"+Q(i,n)+"</"+e+">":"<"+e+' data-react-helmet="true">'+Q(i,n)+"</"+e+">"}(e,t.title,t.titleAttributes,r)}};case k:case x:return{toComponent:function(){return me(t)},toString:function(){return ve(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,r){var o,i=((o={key:r})[q]=!0,o);return Object.keys(t).forEach((function(e){var r=U[e]||e;if(r===P||r===O){var n=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:n}}else i[r]=t[e]})),n.createElement(e,i)}))}(e,t)},toString:function(){return function(e,t,r){return t.reduce((function(t,n){var o=Object.keys(n).filter((function(e){return!(e===P||e===O)})).reduce((function(e,t){var o=void 0===n[t]?t:t+'="'+Q(n[t],r)+'"';return e?e+" "+o:o}),""),i=n.innerHTML||n.cssText||"",a=-1===G.indexOf(e);return t+"<"+e+' data-react-helmet="true" '+o+(a?"/>":">"+i+"</"+e+">")}),"")}(e,t,r)}}}},ge=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,o=e.htmlAttributes,i=e.linkTags,a=e.metaTags,s=e.noscriptTags,c=e.scriptTags,u=e.styleTags,l=e.title,f=void 0===l?"":l,h=e.titleAttributes;return{base:ye(E.BASE,t,n),bodyAttributes:ye(k,r,n),htmlAttributes:ye(x,o,n),link:ye(E.LINK,i,n),meta:ye(E.META,a,n),noscript:ye(E.NOSCRIPT,s,n),script:ye(E.SCRIPT,c,n),style:ye(E.STYLE,u,n),title:ye(E.TITLE,{title:f,titleAttributes:h},n)}},be=m()((function(e){return{baseTag:te([S,L],e),bodyAttributes:ee(k,e),defer:ne(e,B),encode:ne(e,M),htmlAttributes:ee(x,e),linkTags:re(E.LINK,[I,S],e),metaTags:re(E.META,[A,_,j,R,C],e),noscriptTags:re(E.NOSCRIPT,[P],e),onChangeClientState:Z(e),scriptTags:re(E.SCRIPT,[N,P],e),styleTags:re(E.STYLE,[O],e),title:$(e),titleAttributes:ee(T,e)}}),(function(e){ue&&se(ue),e.defer?ue=ae((function(){le(e,(function(){ue=null}))})):(le(e),ue=null)}),ge)((function(){return null})),we=(c=be,l=u=function(e){function t(){return W(this,t),X(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!g()(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case E.SCRIPT:case E.NOSCRIPT:return{innerHTML:t};case E.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,n=e.arrayTypeChildren,o=e.newChildProps,i=e.nestedChildren;return K({},n,((t={})[r.type]=[].concat(n[r.type]||[],[K({},o,this.mapNestedChildrenToProps(r,i))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,r,n=e.child,o=e.newProps,i=e.newChildProps,a=e.nestedChildren;switch(n.type){case E.TITLE:return K({},o,((t={})[n.type]=a,t.titleAttributes=K({},i),t));case E.BODY:return K({},o,{bodyAttributes:K({},i)});case E.HTML:return K({},o,{htmlAttributes:K({},i)})}return K({},o,((r={})[n.type]=K({},i),r))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=K({},t);return Object.keys(e).forEach((function(t){var n;r=K({},r,((n={})[t]=e[t],n))})),r},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var r=this,o={};return n.Children.forEach(e,(function(e){if(e&&e.props){var n=e.props,i=n.children,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[z[r]||r]=e[r],t}),t)}(V(n,["children"]));switch(r.warnOnInvalidChildren(e,i),e.type){case E.LINK:case E.META:case E.NOSCRIPT:case E.SCRIPT:case E.STYLE:o=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:o,newChildProps:a,nestedChildren:i});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:a,nestedChildren:i})}}})),t=this.mapArrayTypeChildrenToProps(o,t)},t.prototype.render=function(){var e=this.props,t=e.children,r=V(e,["children"]),o=K({},r);return t&&(o=this.mapChildrenToProps(t,o)),n.createElement(c,o)},Y(t,null,[{key:"canUseDOM",set:function(e){c.canUseDOM=e}}]),t}(n.Component),u.propTypes={base:p().object,bodyAttributes:p().object,children:p().oneOfType([p().arrayOf(p().node),p().node]),defaultTitle:p().string,defer:p().bool,encodeSpecialCharacters:p().bool,htmlAttributes:p().object,link:p().arrayOf(p().object),meta:p().arrayOf(p().object),noscript:p().arrayOf(p().object),onChangeClientState:p().func,script:p().arrayOf(p().object),style:p().arrayOf(p().object),title:p().string,titleAttributes:p().object,titleTemplate:p().string},u.defaultProps={defer:!0,encodeSpecialCharacters:!0},u.peek=c.peek,u.rewind=function(){var e=c.rewind();return e||(e=ge({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},l);we.renderStatic=we.rewind;function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t,r){return t&&xe(e.prototype,t),r&&xe(e,r),e}var Ee={"X-Client-Info":"supabase-js/".concat("1.25.1")};var _e=r(9611);function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,_e.Z)(e,t)}var Se=r(8);function je(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}var Ce=r(4944),Ae=r.n(Ce),Re=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},Ie=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},Ne=function(e,t){if("function"!=typeof e.json)return t(e);e.json().then((function(r){return t({message:Ie(r),status:(null==e?void 0:e.status)||500})}))},Le=function(e,t,r){var n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e||(n.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},null==t?void 0:t.headers),n.body=JSON.stringify(r)),n};function Ue(e,t,r,n){return Re(this,void 0,void 0,h().mark((function o(){return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise((function(o,i){Ae()(t,Le(e,r,n)).then((function(e){if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?o:e.json()})).then((function(e){return o(e)})).catch((function(e){return Ne(e,i)}))})));case 1:case"end":return o.stop()}}),o)})))}function De(e,t){return Re(this,void 0,void 0,h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Ue("GET",e,t));case 1:case"end":return r.stop()}}),r)})))}function Be(e,t,r){return Re(this,void 0,void 0,h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ue("POST",e,r,t));case 1:case"end":return n.stop()}}),n)})))}function Me(e,t,r){return Re(this,void 0,void 0,h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ue("PUT",e,r,t));case 1:case"end":return n.stop()}}),n)})))}function Fe(e,t,r){return Re(this,void 0,void 0,h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ue("DELETE",e,r,t));case 1:case"end":return n.stop()}}),n)})))}var He={"X-Client-Info":"gotrue-js/".concat("1.18.0")},ze="supabase.auth.token",Ge={name:"sb:token",lifetime:28800,domain:"",path:"/",sameSite:"lax"};function qe(e,t){var r,n,o;return function(e,t,r){var n=r||{},o=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!i.test(a))throw new TypeError("argument val is invalid");var s=e+"="+a;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(c)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}(e.name,e.value,{maxAge:e.maxAge,expires:new Date(Date.now()+1e3*e.maxAge),httpOnly:!0,secure:t,path:null!==(r=e.path)&&void 0!==r?r:"/",domain:null!==(n=e.domain)&&void 0!==n?n:"",sameSite:null!==(o=e.sameSite)&&void 0!==o?o:"lax"})}function Je(e,t,r){var n=r.map((function(t){return qe(t,function(e){if(!e||!e.headers||!e.headers.host)throw new Error('The "host" request header is not available');var t=e.headers.host.indexOf(":")>-1&&e.headers.host.split(":")[0]||e.headers.host;return!(["localhost","127.0.0.1"].indexOf(t)>-1||t.endsWith(".local"))}(e))})),o=t.getHeader("Set-Cookie");o&&(o instanceof Array?Array.prototype.push.apply(n,o):"string"==typeof o&&n.push(o)),t.setHeader("Set-Cookie",n)}function We(e,t,r){Je(e,t,[r])}function Ye(e){return Math.round(Date.now()/1e3)+e}var Ke=function(){return"undefined"!=typeof window};function Ve(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}var Xe=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},Qe=function(){function e(t){var r=t.url,n=void 0===r?"":r,o=t.headers,i=void 0===o?{}:o,a=t.cookieOptions;ke(this,e),this.url=n,this.headers=i,this.cookieOptions=Object.assign(Object.assign({},Ge),a)}return Te(e,[{key:"signUpWithEmail",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Xe(this,void 0,void 0,h().mark((function n(){var o,i,a,s;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object.assign({},this.headers),i="",r.redirectTo&&(i="?redirect_to="+encodeURIComponent(r.redirectTo)),n.next=6,Be("".concat(this.url,"/signup").concat(i),{email:e,password:t,data:r.data},{headers:o});case 6:return a=n.sent,(s=Object.assign({},a)).expires_in&&(s.expires_at=Ye(a.expires_in)),n.abrupt("return",{data:s,error:null});case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 15:case"end":return n.stop()}}),n,this,[[0,12]])})))}},{key:"signInWithEmail",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Xe(this,void 0,void 0,h().mark((function n(){var o,i,a,s;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object.assign({},this.headers),i="?grant_type=password",r.redirectTo&&(i+="&redirect_to="+encodeURIComponent(r.redirectTo)),n.next=6,Be("".concat(this.url,"/token").concat(i),{email:e,password:t},{headers:o});case 6:return a=n.sent,(s=Object.assign({},a)).expires_in&&(s.expires_at=Ye(a.expires_in)),n.abrupt("return",{data:s,error:null});case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 15:case"end":return n.stop()}}),n,this,[[0,12]])})))}},{key:"signUpWithPhone",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Xe(this,void 0,void 0,h().mark((function n(){var o,i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object.assign({},this.headers),n.next=4,Be("".concat(this.url,"/signup"),{phone:e,password:t,data:r.data},{headers:o});case 4:return i=n.sent,(a=Object.assign({},i)).expires_in&&(a.expires_at=Ye(i.expires_in)),n.abrupt("return",{data:a,error:null});case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 13:case"end":return n.stop()}}),n,this,[[0,10]])})))}},{key:"signInWithPhone",value:function(e,t){return Xe(this,void 0,void 0,h().mark((function r(){var n,o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=Object.assign({},this.headers),"?grant_type=password",r.next=5,Be("".concat(this.url,"/token").concat("?grant_type=password"),{phone:e,password:t},{headers:n});case 5:return o=r.sent,(i=Object.assign({},o)).expires_in&&(i.expires_at=Ye(o.expires_in)),r.abrupt("return",{data:i,error:null});case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 14:case"end":return r.stop()}}),r,this,[[0,11]])})))}},{key:"sendMagicLinkEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xe(this,void 0,void 0,h().mark((function r(){var n,o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=Object.assign({},this.headers),o="",t.redirectTo&&(o+="?redirect_to="+encodeURIComponent(t.redirectTo)),r.next=6,Be("".concat(this.url,"/magiclink").concat(o),{email:e},{headers:n});case 6:return i=r.sent,r.abrupt("return",{data:i,error:null});case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 13:case"end":return r.stop()}}),r,this,[[0,10]])})))}},{key:"sendMobileOTP",value:function(e){return Xe(this,void 0,void 0,h().mark((function t(){var r,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Object.assign({},this.headers),t.next=4,Be("".concat(this.url,"/otp"),{phone:e},{headers:r});case 4:return n=t.sent,t.abrupt("return",{data:n,error:null});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"verifyMobileOTP",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Xe(this,void 0,void 0,h().mark((function n(){var o,i;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object.assign({},this.headers),n.next=4,Be("".concat(this.url,"/verify"),{phone:e,token:t,type:"sms",redirect_to:r.redirectTo},{headers:o});case 4:return i=n.sent,n.abrupt("return",{data:i,error:null});case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 11:case"end":return n.stop()}}),n,this,[[0,8]])})))}},{key:"inviteUserByEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xe(this,void 0,void 0,h().mark((function r(){var n,o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=Object.assign({},this.headers),o="",t.redirectTo&&(o+="?redirect_to="+encodeURIComponent(t.redirectTo)),r.next=6,Be("".concat(this.url,"/invite").concat(o),{email:e,data:t.data},{headers:n});case 6:return i=r.sent,r.abrupt("return",{data:i,error:null});case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 13:case"end":return r.stop()}}),r,this,[[0,10]])})))}},{key:"resetPasswordForEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xe(this,void 0,void 0,h().mark((function r(){var n,o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=Object.assign({},this.headers),o="",t.redirectTo&&(o+="?redirect_to="+encodeURIComponent(t.redirectTo)),r.next=6,Be("".concat(this.url,"/recover").concat(o),{email:e},{headers:n});case 6:return i=r.sent,r.abrupt("return",{data:i,error:null});case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 13:case"end":return r.stop()}}),r,this,[[0,10]])})))}},{key:"_createRequestHeaders",value:function(e){var t=Object.assign({},this.headers);return t.Authorization="Bearer ".concat(e),t}},{key:"signOut",value:function(e){return Xe(this,void 0,void 0,h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be("".concat(this.url,"/logout"),{},{headers:this._createRequestHeaders(e),noResolveJson:!0});case 3:return t.abrupt("return",{error:null});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{error:t.t0});case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getUrlForProvider",value:function(e,t){var r=["provider=".concat(encodeURIComponent(e))];return(null==t?void 0:t.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(t.redirectTo))),(null==t?void 0:t.scopes)&&r.push("scopes=".concat(encodeURIComponent(t.scopes))),"".concat(this.url,"/authorize?").concat(r.join("&"))}},{key:"getUser",value:function(e){return Xe(this,void 0,void 0,h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,De("".concat(this.url,"/user"),{headers:this._createRequestHeaders(e)});case 3:return r=t.sent,t.abrupt("return",{user:r,data:r,error:null});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{user:null,data:null,error:t.t0});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"updateUser",value:function(e,t){return Xe(this,void 0,void 0,h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Me("".concat(this.url,"/user"),t,{headers:this._createRequestHeaders(e)});case 3:return n=r.sent,r.abrupt("return",{user:n,data:n,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{user:null,data:null,error:r.t0});case 10:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"deleteUser",value:function(e,t){return Xe(this,void 0,void 0,h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Fe("".concat(this.url,"/admin/users/").concat(e),{},{headers:this._createRequestHeaders(t)});case 3:return n=r.sent,r.abrupt("return",{user:n,data:n,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{user:null,data:null,error:r.t0});case 10:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"refreshAccessToken",value:function(e){return Xe(this,void 0,void 0,h().mark((function t(){var r,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be("".concat(this.url,"/token?grant_type=refresh_token"),{refresh_token:e},{headers:this.headers});case 3:return r=t.sent,(n=Object.assign({},r)).expires_in&&(n.expires_at=Ye(r.expires_in)),t.abrupt("return",{data:n,error:null});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 12:case"end":return t.stop()}}),t,this,[[0,9]])})))}},{key:"setAuthCookie",value:function(e,t){"POST"!==e.method&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));var r=e.body,n=r.event,o=r.session;if(!n)throw new Error("Auth event missing!");if("SIGNED_IN"===n){if(!o)throw new Error("Auth session missing!");We(e,t,{name:this.cookieOptions.name,value:o.access_token,domain:this.cookieOptions.domain,maxAge:this.cookieOptions.lifetime,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite})}"SIGNED_OUT"===n&&function(e,t,r){We(e,t,{name:r,value:"",maxAge:-1})}(e,t,this.cookieOptions.name),t.status(200).json({})}},{key:"getUserByCookie",value:function(e){return Xe(this,void 0,void 0,h().mark((function t(){var r,n,o,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.cookies){t.next=3;break}throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");case 3:if(e.cookies[this.cookieOptions.name]){t.next=5;break}throw new Error("No cookie found!");case 5:return r=e.cookies[this.cookieOptions.name],t.next=8,this.getUser(r);case 8:if(n=t.sent,o=n.user,!(i=n.error)){t.next=13;break}throw i;case 13:return t.abrupt("return",{user:o,data:o,error:null});case 16:return t.prev=16,t.t0=t.catch(0),t.abrupt("return",{user:null,data:null,error:t.t0});case 19:case"end":return t.stop()}}),t,this,[[0,16]])})))}},{key:"generateLink",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Xe(this,void 0,void 0,h().mark((function n(){var o;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Be("".concat(this.url,"/admin/generate_link"),{type:e,email:t,password:r.password,data:r.data,redirect_to:r.redirectTo},{headers:this.headers});case 3:return o=n.sent,n.abrupt("return",{data:o,error:null});case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 10:case"end":return n.stop()}}),n,this,[[0,7]])})))}}]),e}();r(5743);var $e=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();var Ze={url:"http://localhost:9999",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:He},et=function(){function e(t){ke(this,e),this.stateChangeEmitters=new Map;var r=Object.assign(Object.assign({},Ze),t);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.localStorage=r.localStorage||globalThis.localStorage,this.api=new Qe({url:r.url,headers:r.headers,cookieOptions:r.cookieOptions}),this._recoverSession(),this._recoverAndRefresh();try{r.detectSessionInUrl&&Ke()&&Ve("access_token")&&this.getSessionFromUrl({storeSession:!0})}catch(n){console.log("Error getting session from URL.")}}return Te(e,[{key:"signUp",value:function(e){var t=e.email,r=e.password,n=e.phone,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $e(this,void 0,void 0,h().mark((function e(){var i,a,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._removeSession(),!n||!r){e.next=8;break}return e.next=5,this.api.signUpWithPhone(n,r,{data:o.data});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.api.signUpWithEmail(t,r,{redirectTo:o.redirectTo,data:o.data});case 10:e.t0=e.sent;case 11:if(i=e.t0,a=i.data,!(s=i.error)){e.next=16;break}throw s;case 16:if(a){e.next=18;break}throw"An error occurred on sign up.";case 18:return c=null,u=null,a.access_token&&(u=(c=a).user,this._saveSession(c),this._notifyAllSubscribers("SIGNED_IN")),a.id&&(u=a),e.abrupt("return",{data:a,user:u,session:c,error:null});case 25:return e.prev=25,e.t1=e.catch(0),e.abrupt("return",{data:null,user:null,session:null,error:e.t1});case 28:case"end":return e.stop()}}),e,this,[[0,25]])})))}},{key:"signIn",value:function(e){var t=e.email,r=e.phone,n=e.password,o=e.refreshToken,i=e.provider,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $e(this,void 0,void 0,h().mark((function e(){var s,c,u,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._removeSession(),!t||n){e.next=8;break}return e.next=5,this.api.sendMagicLinkEmail(t,{redirectTo:a.redirectTo});case 5:return s=e.sent,c=s.error,e.abrupt("return",{data:null,user:null,session:null,error:c});case 8:if(!t||!n){e.next=10;break}return e.abrupt("return",this._handleEmailSignIn(t,n,{redirectTo:a.redirectTo}));case 10:if(!r||n){e.next=16;break}return e.next=13,this.api.sendMobileOTP(r);case 13:return u=e.sent,l=u.error,e.abrupt("return",{data:null,user:null,session:null,error:l});case 16:if(!r||!n){e.next=18;break}return e.abrupt("return",this._handlePhoneSignIn(r,n));case 18:if(!o){e.next=26;break}return e.next=21,this._callRefreshToken(o);case 21:if(f=e.sent,!(d=f.error)){e.next=25;break}throw d;case 25:return e.abrupt("return",{data:this.currentSession,user:this.currentUser,session:this.currentSession,error:null});case 26:if(!i){e.next=28;break}return e.abrupt("return",this._handleProviderSignIn(i,{redirectTo:a.redirectTo,scopes:a.scopes}));case 28:throw new Error("You must provide either an email, phone number or a third-party provider.");case 31:return e.prev=31,e.t0=e.catch(0),e.abrupt("return",{data:null,user:null,session:null,error:e.t0});case 34:case"end":return e.stop()}}),e,this,[[0,31]])})))}},{key:"verifyOTP",value:function(e){var t=e.phone,r=e.token,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $e(this,void 0,void 0,h().mark((function e(){var o,i,a,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._removeSession(),e.next=4,this.api.verifyMobileOTP(t,r,n);case 4:if(o=e.sent,i=o.data,!(a=o.error)){e.next=9;break}throw a;case 9:if(i){e.next=11;break}throw"An error occurred on token verification.";case 11:return s=null,c=null,i.access_token&&(c=(s=i).user,this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(c=i),e.abrupt("return",{data:i,user:c,session:s,error:null});case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",{data:null,user:null,session:null,error:e.t0});case 21:case"end":return e.stop()}}),e,this,[[0,18]])})))}},{key:"user",value:function(){return this.currentUser}},{key:"session",value:function(){return this.currentSession}},{key:"refreshSession",value:function(){var e;return $e(this,void 0,void 0,h().mark((function t(){var r,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===(e=this.currentSession)||void 0===e?void 0:e.access_token){t.next=3;break}throw new Error("Not logged in.");case 3:return t.next=5,this._callRefreshToken();case 5:if(r=t.sent,!(n=r.error)){t.next=9;break}throw n;case 9:return t.abrupt("return",{data:this.currentSession,user:this.currentUser,error:null});case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",{data:null,user:null,error:t.t0});case 15:case"end":return t.stop()}}),t,this,[[0,12]])})))}},{key:"update",value:function(e){var t;return $e(this,void 0,void 0,h().mark((function r(){var n,o,i,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,null===(t=this.currentSession)||void 0===t?void 0:t.access_token){r.next=3;break}throw new Error("Not logged in.");case 3:return r.next=5,this.api.updateUser(this.currentSession.access_token,e);case 5:if(n=r.sent,o=n.user,!(i=n.error)){r.next=10;break}throw i;case 10:if(o){r.next=12;break}throw Error("Invalid user data.");case 12:return a=Object.assign(Object.assign({},this.currentSession),{user:o}),this._saveSession(a),this._notifyAllSubscribers("USER_UPDATED"),r.abrupt("return",{data:o,user:o,error:null});case 18:return r.prev=18,r.t0=r.catch(0),r.abrupt("return",{data:null,user:null,error:r.t0});case 21:case"end":return r.stop()}}),r,this,[[0,18]])})))}},{key:"setSession",value:function(e){return $e(this,void 0,void 0,h().mark((function t(){var r,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("No current session.");case 3:return t.next=5,this.api.refreshAccessToken(e);case 5:if(r=t.sent,n=r.data,!(o=r.error)){t.next=10;break}return t.abrupt("return",{session:null,error:o});case 10:if(n){t.next=12;break}return t.abrupt("return",{session:null,error:{name:"Invalid refresh_token",message:"JWT token provided is Invalid"}});case 12:return this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN"),t.abrupt("return",{session:n,error:null});case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",{error:t.t0,session:null});case 20:case"end":return t.stop()}}),t,this,[[0,17]])})))}},{key:"setAuth",value:function(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:null}),this.currentSession}},{key:"getSessionFromUrl",value:function(e){return $e(this,void 0,void 0,h().mark((function t(){var r,n,o,i,a,s,c,u,l,f,d,p;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Ke()){t.next=3;break}throw new Error("No browser detected.");case 3:if(!(r=Ve("error_description"))){t.next=6;break}throw new Error(r);case 6:if(n=Ve("provider_token"),o=Ve("access_token")){t.next=10;break}throw new Error("No access_token detected.");case 10:if(i=Ve("expires_in")){t.next=13;break}throw new Error("No expires_in detected.");case 13:if(a=Ve("refresh_token")){t.next=16;break}throw new Error("No refresh_token detected.");case 16:if(s=Ve("token_type")){t.next=19;break}throw new Error("No token_type detected.");case 19:return c=Math.round(Date.now()/1e3),u=c+parseInt(i),t.next=23,this.api.getUser(o);case 23:if(l=t.sent,f=l.user,!(d=l.error)){t.next=28;break}throw d;case 28:return p={provider_token:n,access_token:o,expires_in:parseInt(i),expires_at:u,refresh_token:a,token_type:s,user:f},(null==e?void 0:e.storeSession)&&(this._saveSession(p),this._notifyAllSubscribers("SIGNED_IN"),"recovery"===Ve("type")&&this._notifyAllSubscribers("PASSWORD_RECOVERY")),window.location.hash="",t.abrupt("return",{data:p,error:null});case 34:return t.prev=34,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 37:case"end":return t.stop()}}),t,this,[[0,34]])})))}},{key:"signOut",value:function(){var e;return $e(this,void 0,void 0,h().mark((function t(){var r,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(e=this.currentSession)||void 0===e?void 0:e.access_token,this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),!r){t.next=10;break}return t.next=6,this.api.signOut(r);case 6:if(n=t.sent,!(o=n.error)){t.next=10;break}return t.abrupt("return",{error:o});case 10:return t.abrupt("return",{error:null});case 11:case"end":return t.stop()}}),t,this)})))}},{key:"onAuthStateChange",value:function(e){try{var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r=this,n={id:t,callback:e,unsubscribe:function(){r.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),{data:n,error:null}}catch(o){return{data:null,error:o}}}},{key:"_handleEmailSignIn",value:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $e(this,void 0,void 0,h().mark((function i(){var a,s,c;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this.api.signInWithEmail(e,t,{redirectTo:o.redirectTo});case 3:if(a=i.sent,s=a.data,!(c=a.error)&&s){i.next=8;break}return i.abrupt("return",{data:null,user:null,session:null,error:c});case 8:return((null===(r=null==s?void 0:s.user)||void 0===r?void 0:r.confirmed_at)||(null===(n=null==s?void 0:s.user)||void 0===n?void 0:n.email_confirmed_at))&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),i.abrupt("return",{data:s,user:s.user,session:s,error:null});case 12:return i.prev=12,i.t0=i.catch(0),i.abrupt("return",{data:null,user:null,session:null,error:i.t0});case 15:case"end":return i.stop()}}),i,this,[[0,12]])})))}},{key:"_handlePhoneSignIn",value:function(e,t){var r;return $e(this,void 0,void 0,h().mark((function n(){var o,i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.api.signInWithPhone(e,t);case 3:if(o=n.sent,i=o.data,!(a=o.error)&&i){n.next=8;break}return n.abrupt("return",{data:null,user:null,session:null,error:a});case 8:return(null===(r=null==i?void 0:i.user)||void 0===r?void 0:r.phone_confirmed_at)&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),n.abrupt("return",{data:i,user:i.user,session:i,error:null});case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",{data:null,user:null,session:null,error:n.t0});case 15:case"end":return n.stop()}}),n,this,[[0,12]])})))}},{key:"_handleProviderSignIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes});try{return Ke()&&(window.location.href=r),{provider:e,url:r,data:null,session:null,user:null,error:null}}catch(n){return r?{provider:e,url:r,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:n}}}},{key:"_recoverSession",value:function(){var e;try{var t=Ke()&&(null===(e=this.localStorage)||void 0===e?void 0:e.getItem(ze));if(!t||"string"!=typeof t)return null;var r=JSON.parse(t),n=r.currentSession;r.expiresAt>=Math.round(Date.now()/1e3)&&(null==n?void 0:n.user)&&(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN"))}catch(o){console.log("error",o)}}},{key:"_recoverAndRefresh",value:function(){return $e(this,void 0,void 0,h().mark((function e(){var t,r,n,o,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=Ke(),!e.t0){e.next=6;break}return e.next=5,this.localStorage.getItem(ze);case 5:e.t0=e.sent;case 6:if(t=e.t0){e.next=9;break}return e.abrupt("return",null);case 9:if(r=JSON.parse(t),n=r.currentSession,o=r.expiresAt,i=Math.round(Date.now()/1e3),!(o<i)){e.next=27;break}if(!this.autoRefreshToken||!n.refresh_token){e.next=24;break}return e.next=16,this._callRefreshToken(n.refresh_token);case 16:if(a=e.sent,!(s=a.error)){e.next=22;break}return console.log(s.message),e.next=22,this._removeSession();case 22:e.next=25;break;case 24:this._removeSession();case 25:e.next=28;break;case 27:n&&n.user?(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession());case 28:e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(0),console.error(e.t1),e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,this,[[0,30]])})))}},{key:"_callRefreshToken",value:function(e){var t;return void 0===e&&(e=null===(t=this.currentSession)||void 0===t?void 0:t.refresh_token),$e(this,void 0,void 0,h().mark((function t(){var r,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("No current session.");case 3:return t.next=5,this.api.refreshAccessToken(e);case 5:if(r=t.sent,n=r.data,!(o=r.error)){t.next=10;break}throw o;case 10:if(n){t.next=12;break}throw Error("Invalid session data.");case 12:return this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN"),t.abrupt("return",{data:n,error:null});case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 20:case"end":return t.stop()}}),t,this,[[0,17]])})))}},{key:"_notifyAllSubscribers",value:function(e){var t=this;this.stateChangeEmitters.forEach((function(r){return r.callback(e,t.currentSession)}))}},{key:"_saveSession",value:function(e){this.currentSession=e,this.currentUser=e.user;var t=e.expires_at;if(t){var r=t-Math.round(Date.now()/1e3),n=r>60?60:.5;this._startAutoRefreshToken(1e3*(r-n))}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}},{key:"_persistSession",value:function(e){var t={currentSession:e,expiresAt:e.expires_at};Ke()&&this.localStorage.setItem(ze,JSON.stringify(t))}},{key:"_removeSession",value:function(){return $e(this,void 0,void 0,h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e.t0=Ke(),!e.t0){e.next=7;break}return e.next=7,this.localStorage.removeItem(ze);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_startAutoRefreshToken",value:function(e){var t=this;this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e<=0||!this.autoRefreshToken||(this.refreshTokenTimer=setTimeout((function(){return t._callRefreshToken()}),e),"function"==typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())}}]),e}();function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var rt=function(e){Oe(r,e);var t=tt(r);function r(e){return ke(this,r),t.call(this,e)}return r}(et),nt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},ot=function(){function e(t){ke(this,e),this.shouldThrowOnError=!1,Object.assign(this,t)}return Te(e,[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"then",value:function(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");var n=Ae()(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((function(e){return nt(r,void 0,void 0,h().mark((function t(){var r,n,o,i,a,s,c,u,l,f,d;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null,a=null,s=null,!e.ok){t.next=15;break}if(c=null===(r=this.headers.Prefer)||void 0===r?void 0:r.split(",").includes("return=minimal"),"HEAD"===this.method||c){t.next=10;break}return t.next=8,e.text();case 8:(u=t.sent)&&(a="text/csv"===this.headers.Accept?u:JSON.parse(u));case 10:l=null===(n=this.headers.Prefer)||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),f=null===(o=e.headers.get("content-range"))||void 0===o?void 0:o.split("/"),l&&f&&f.length>1&&(s=parseInt(f[1])),t.next=20;break;case 15:return t.next=17,e.json();case 17:if(!(i=t.sent)||!this.shouldThrowOnError){t.next=20;break}throw i;case 20:return d={error:i,data:a,count:s,status:e.status,statusText:e.statusText,body:a},t.abrupt("return",d);case 22:case"end":return t.stop()}}),t,this)})))}));return this.shouldThrowOnError||(n=n.catch((function(e){return{error:{message:"FetchError: ".concat(e.message),details:"",hint:"",code:e.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}}))),n.then(e,t)}}]),e}();function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var at=function(e){Oe(r,e);var t=it(r);function r(){return ke(this,r),t.apply(this,arguments)}return Te(r,[{key:"select",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",t=!1,r=e.split("").map((function(e){return/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)})).join("");return this.url.searchParams.set("select",r),this}},{key:"order",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ascending,n=void 0===r||r,o=t.nullsFirst,i=void 0!==o&&o,a=t.foreignTable,s=void 0===a?"order":"".concat(a,".order"),c=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(c?"".concat(c,","):"").concat(e,".").concat(n?"asc":"desc",".").concat(i?"nullsfirst":"nullslast")),this}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.foreignTable,n=void 0===r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}},{key:"range",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.foreignTable,o=void 0===n?"offset":"".concat(n,".offset"),i=void 0===n?"limit":"".concat(n,".limit");return this.url.searchParams.set(o,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this}},{key:"maybeSingle",value:function(){var e=this;this.headers.Accept="application/vnd.pgrst.object+json";var t=new r(this);return t.then=function(t,r){return e.then((function(e){var r,n;return(null===(n=null===(r=e.error)||void 0===r?void 0:r.details)||void 0===n?void 0:n.includes("Results contain 0 rows"))?t({error:null,data:null,count:e.count,status:200,statusText:"OK",body:null}):t(e)}),r)},t}},{key:"csv",value:function(){return this.headers.Accept="text/csv",this}}]),r}(ot);function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var ct=function(e){Oe(r,e);var t=st(r);function r(){var e;return ke(this,r),(e=t.apply(this,arguments)).cs=e.contains,e.cd=e.containedBy,e.sl=e.rangeLt,e.sr=e.rangeGt,e.nxl=e.rangeGte,e.nxr=e.rangeLte,e.adj=e.rangeAdjacent,e.ov=e.overlaps,e}return Te(r,[{key:"not",value:function(e,t,r){return this.url.searchParams.append("".concat(e),"not.".concat(t,".").concat(r)),this}},{key:"or",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.foreignTable,n=void 0===r?"or":"".concat(r,".or");return this.url.searchParams.append(n,"(".concat(e,")")),this}},{key:"eq",value:function(e,t){return this.url.searchParams.append("".concat(e),"eq.".concat(t)),this}},{key:"neq",value:function(e,t){return this.url.searchParams.append("".concat(e),"neq.".concat(t)),this}},{key:"gt",value:function(e,t){return this.url.searchParams.append("".concat(e),"gt.".concat(t)),this}},{key:"gte",value:function(e,t){return this.url.searchParams.append("".concat(e),"gte.".concat(t)),this}},{key:"lt",value:function(e,t){return this.url.searchParams.append("".concat(e),"lt.".concat(t)),this}},{key:"lte",value:function(e,t){return this.url.searchParams.append("".concat(e),"lte.".concat(t)),this}},{key:"like",value:function(e,t){return this.url.searchParams.append("".concat(e),"like.".concat(t)),this}},{key:"ilike",value:function(e,t){return this.url.searchParams.append("".concat(e),"ilike.".concat(t)),this}},{key:"is",value:function(e,t){return this.url.searchParams.append("".concat(e),"is.".concat(t)),this}},{key:"in",value:function(e,t){var r=t.map((function(e){return"string"==typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)})).join(",");return this.url.searchParams.append("".concat(e),"in.(".concat(r,")")),this}},{key:"contains",value:function(e,t){return"string"==typeof t?this.url.searchParams.append("".concat(e),"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append("".concat(e),"cs.{".concat(t.join(","),"}")):this.url.searchParams.append("".concat(e),"cs.".concat(JSON.stringify(t))),this}},{key:"containedBy",value:function(e,t){return"string"==typeof t?this.url.searchParams.append("".concat(e),"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append("".concat(e),"cd.{".concat(t.join(","),"}")):this.url.searchParams.append("".concat(e),"cd.".concat(JSON.stringify(t))),this}},{key:"rangeLt",value:function(e,t){return this.url.searchParams.append("".concat(e),"sl.".concat(t)),this}},{key:"rangeGt",value:function(e,t){return this.url.searchParams.append("".concat(e),"sr.".concat(t)),this}},{key:"rangeGte",value:function(e,t){return this.url.searchParams.append("".concat(e),"nxl.".concat(t)),this}},{key:"rangeLte",value:function(e,t){return this.url.searchParams.append("".concat(e),"nxr.".concat(t)),this}},{key:"rangeAdjacent",value:function(e,t){return this.url.searchParams.append("".concat(e),"adj.".concat(t)),this}},{key:"overlaps",value:function(e,t){return"string"==typeof t?this.url.searchParams.append("".concat(e),"ov.".concat(t)):this.url.searchParams.append("".concat(e),"ov.{".concat(t.join(","),"}")),this}},{key:"textSearch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,o=r.type,i=void 0===o?null:o,a="";"plain"===i?a="pl":"phrase"===i?a="ph":"websearch"===i&&(a="w");var s=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append("".concat(e),"".concat(a,"fts").concat(s,".").concat(t)),this}},{key:"fts",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append("".concat(e),"fts".concat(o,".").concat(t)),this}},{key:"plfts",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append("".concat(e),"plfts".concat(o,".").concat(t)),this}},{key:"phfts",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append("".concat(e),"phfts".concat(o,".").concat(t)),this}},{key:"wfts",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append("".concat(e),"wfts".concat(o,".").concat(t)),this}},{key:"filter",value:function(e,t,r){return this.url.searchParams.append("".concat(e),"".concat(t,".").concat(r)),this}},{key:"match",value:function(e){var t=this;return Object.keys(e).forEach((function(r){t.url.searchParams.append("".concat(r),"eq.".concat(e[r]))})),this}}]),r}(at);function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var lt=function(e){Oe(r,e);var t=ut(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.headers,a=void 0===i?{}:i,s=o.schema;return ke(this,r),(n=t.call(this,{})).url=new URL(e),n.headers=Object.assign({},a),n.schema=s,n}return Te(r,[{key:"select",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.head,n=void 0!==r&&r,o=t.count,i=void 0===o?null:o;this.method="GET";var a=!1,s=e.split("").map((function(e){return/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)})).join("");return this.url.searchParams.set("select",s),i&&(this.headers.Prefer="count=".concat(i)),n&&(this.method="HEAD"),new ct(this)}},{key:"insert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.upsert,n=void 0!==r&&r,i=t.onConflict,a=t.returning,s=void 0===a?"representation":a,c=t.count,u=void 0===c?null:c;this.method="POST";var l=["return=".concat(s)];if(n&&l.push("resolution=merge-duplicates"),n&&void 0!==i&&this.url.searchParams.set("on_conflict",i),this.body=e,u&&l.push("count=".concat(u)),this.headers.Prefer=l.join(","),Array.isArray(e)){var f=e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]);if(f.length>0){var h=(0,o.Z)(new Set(f)).map((function(e){return'"'.concat(e,'"')}));this.url.searchParams.set("columns",h.join(","))}}return new ct(this)}},{key:"upsert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onConflict,n=t.returning,o=void 0===n?"representation":n,i=t.count,a=void 0===i?null:i,s=t.ignoreDuplicates,c=void 0!==s&&s;this.method="POST";var u=["resolution=".concat(c?"ignore":"merge","-duplicates"),"return=".concat(o)];return void 0!==r&&this.url.searchParams.set("on_conflict",r),this.body=e,a&&u.push("count=".concat(a)),this.headers.Prefer=u.join(","),new ct(this)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.returning,n=void 0===r?"representation":r,o=t.count,i=void 0===o?null:o;this.method="PATCH";var a=["return=".concat(n)];return this.body=e,i&&a.push("count=".concat(i)),this.headers.Prefer=a.join(","),new ct(this)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.returning,r=void 0===t?"representation":t,n=e.count,o=void 0===n?null:n;this.method="DELETE";var i=["return=".concat(r)];return o&&i.push("count=".concat(o)),this.headers.Prefer=i.join(","),new ct(this)}}]),r}(ot);var ft=r(181);function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||(0,ft.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var pt,vt=function(e){Oe(r,e);var t=dt(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.headers,a=void 0===i?{}:i,s=o.schema;return ke(this,r),(n=t.call(this,{})).url=new URL(e),n.headers=Object.assign({},a),n.schema=s,n}return Te(r,[{key:"rpc",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.head,o=void 0!==n&&n,i=r.count,a=void 0===i?null:i;return o?(this.method="HEAD",e&&Object.entries(e).forEach((function(e){var r=ht(e,2),n=r[0],o=r[1];t.url.searchParams.append(n,o)}))):(this.method="POST",this.body=e),a&&(void 0!==this.headers.Prefer?this.headers.Prefer+=",count=".concat(a):this.headers.Prefer="count=".concat(a)),new ct(this)}}]),r}(ot),mt={"X-Client-Info":"postgrest-js/".concat("0.34.1")},yt=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,o=void 0===n?{}:n,i=r.schema;ke(this,e),this.url=t,this.headers=Object.assign(Object.assign({},mt),o),this.schema=i}return Te(e,[{key:"auth",value:function(e){return this.headers.Authorization="Bearer ".concat(e),this}},{key:"from",value:function(e){var t="".concat(this.url,"/").concat(e);return new lt(t,{headers:this.headers,schema:this.schema})}},{key:"rpc",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.head,o=void 0!==n&&n,i=r.count,a=void 0===i?null:i,s="".concat(this.url,"/rpc/").concat(e);return new vt(s,{headers:this.headers,schema:this.schema}).rpc(t,{head:o,count:a})}}]),e}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(pt||(pt={}));var gt,bt,wt,kt,xt=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((function(r,n){return r[n]=Tt(n,e,t,o),r}),{})},Tt=function(e,t,r,n){var o=t.find((function(t){return t.name===e})),i=null==o?void 0:o.type,a=r[e];return i&&!n.includes(i)?Et(i,a):_t(a)},Et=function(e,t){if("_"===e.charAt(0)){var r=e.slice(1,e.length);return Pt(t,r)}switch(e){case pt.bool:return Ot(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return St(t);case pt.json:case pt.jsonb:return jt(t);case pt.timestamp:return Ct(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:default:return _t(t)}},_t=function(e){return e},Ot=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},St=function(e){if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return e},jt=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},Pt=function(e,t){if("string"!=typeof e)return e;var r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){var o,i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch(a){o=i?i.split(","):[]}return o.map((function(e){return Et(t,e)}))}return e},Ct=function(e){return"string"==typeof e?e.replace(" ","T"):e},At={"X-Client-Info":"realtime-js/".concat("1.2.1")},Rt=1e4;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(gt||(gt={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(bt||(bt={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave"}(wt||(wt={})),function(e){e.websocket="websocket"}(kt||(kt={}));var It=function(){function e(t,r){ke(this,e),this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}return Te(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),Nt=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rt;ke(this,e),this.channel=t,this.event=r,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}return Te(e,[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}},{key:"receive",value:function(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(function(t){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=t,e._matchReceive(t)})),this.timeoutTimer=setTimeout((function(){e.trigger("timeout",{})}),this.timeout))}},{key:"trigger",value:function(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var t=e.status,r=e.response;this.recHooks.filter((function(e){return e.status===t})).forEach((function(e){return e.callback(r)}))}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}]),e}(),Lt=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;ke(this,e),this.topic=t,this.params=n,this.socket=o,this.bindings=[],this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new Nt(this,wt.join,this.params,this.timeout),this.rejoinTimer=new It((function(){return r.rejoinUntilConnected()}),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(function(){r.state=bt.joined,r.rejoinTimer.reset(),r.pushBuffer.forEach((function(e){return e.send()})),r.pushBuffer=[]})),this.onClose((function(){r.rejoinTimer.reset(),r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=bt.closed,r.socket.remove(r)})),this.onError((function(e){r.isLeaving()||r.isClosed()||(r.socket.log("channel","error ".concat(r.topic),e),r.state=bt.errored,r.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(function(){r.isJoining()&&(r.socket.log("channel","timeout ".concat(r.topic),r.joinPush.timeout),r.state=bt.errored,r.rejoinTimer.scheduleTimeout())})),this.on(wt.reply,(function(e,t){r.trigger(r.replyEventName(t),e)}))}return Te(e,[{key:"rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}},{key:"subscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}},{key:"onClose",value:function(e){this.on(wt.close,e)}},{key:"onError",value:function(e){this.on(wt.error,(function(t){return e(t)}))}},{key:"on",value:function(e,t){this.bindings.push({event:e,callback:t})}},{key:"off",value:function(e){this.bindings=this.bindings.filter((function(t){return t.event!==e}))}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var n=new Nt(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}},{key:"unsubscribe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=bt.leaving;var r=function(){e.socket.log("channel","leave ".concat(e.topic)),e.trigger(wt.close,"leave",e.joinRef())};this.joinPush.destroy();var n=new Nt(this,wt.leave,{},t);return n.receive("ok",(function(){return r()})).receive("timeout",(function(){return r()})),n.send(),this.canPush()||n.trigger("ok",{}),n}},{key:"onMessage",value:function(e,t,r){return t}},{key:"isMember",value:function(e){return this.topic===e}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"sendJoin",value:function(e){this.state=bt.joining,this.joinPush.resend(e)}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(e)}},{key:"trigger",value:function(e,t,r){var n=wt.close,o=wt.error,i=wt.leave,a=wt.join;if(!(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())){var s=this.onMessage(e,t,r);if(t&&!s)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter((function(r){return"*"===r.event?e===(null==t?void 0:t.type):r.event===e})).map((function(e){return e.callback(s,r)}))}}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===bt.closed}},{key:"isErrored",value:function(){return this.state===bt.errored}},{key:"isJoined",value:function(){return this.state===bt.joined}},{key:"isJoining",value:function(){return this.state===bt.joining}},{key:"isLeaving",value:function(){return this.state===bt.leaving}}]),e}(),Ut=r(2960),Dt=function(){function e(){ke(this,e),this.HEADER_LENGTH=1}return Te(e,[{key:"decode",value:function(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}},{key:"_decodeBroadcast",value:function(e,t,r){var n=t.getUint8(1),o=t.getUint8(2),i=this.HEADER_LENGTH+2,a=r.decode(e.slice(i,i+n));i+=n;var s=r.decode(e.slice(i,i+o));return i+=o,{ref:null,topic:a,event:s,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}}]),e}(),Bt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},Mt=function(){},Ft=function(){function e(t,r){var n=this;ke(this,e),this.channels=[],this.endPoint="",this.headers=At,this.params={},this.timeout=Rt,this.transport=Ut.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Mt,this.conn=null,this.sendBuffer=[],this.serializer=new Dt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint="".concat(t,"/").concat(kt.websocket),(null==r?void 0:r.params)&&(this.params=r.params),(null==r?void 0:r.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),(null==r?void 0:r.timeout)&&(this.timeout=r.timeout),(null==r?void 0:r.logger)&&(this.logger=r.logger),(null==r?void 0:r.transport)&&(this.transport=r.transport),(null==r?void 0:r.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs),(null==r?void 0:r.longpollerTimeout)&&(this.longpollerTimeout=r.longpollerTimeout),this.reconnectAfterMs=(null==r?void 0:r.reconnectAfterMs)?r.reconnectAfterMs:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4},this.encode=(null==r?void 0:r.encode)?r.encode:function(e,t){return t(JSON.stringify(e))},this.decode=(null==r?void 0:r.decode)?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new It((function(){return Bt(n,void 0,void 0,h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.disconnect();case 2:this.connect();case 3:case"end":return e.stop()}}),e,this)})))}),this.reconnectAfterMs)}return Te(e,[{key:"connect",value:function(){var e=this;this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(t){return e._onConnError(t)},this.conn.onmessage=function(t){return e.onConnMessage(t)},this.conn.onclose=function(t){return e._onConnClose(t)}))}},{key:"disconnect",value:function(e,t){var r=this;return new Promise((function(n,o){try{r.conn&&(r.conn.onclose=function(){},e?r.conn.close(e,t||""):r.conn.close(),r.conn=null,r.heartbeatTimer&&clearInterval(r.heartbeatTimer),r.reconnectTimer.reset()),n({error:null,data:!0})}catch(i){n({error:i,data:!1})}}))}},{key:"log",value:function(e,t,r){this.logger(e,t,r)}},{key:"onOpen",value:function(e){this.stateChangeCallbacks.open.push(e)}},{key:"onClose",value:function(e){this.stateChangeCallbacks.close.push(e)}},{key:"onError",value:function(e){this.stateChangeCallbacks.error.push(e)}},{key:"onMessage",value:function(e){this.stateChangeCallbacks.message.push(e)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case gt.connecting:return"connecting";case gt.open:return"open";case gt.closing:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.channels=this.channels.filter((function(t){return t.joinRef()!==e.joinRef()}))}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Lt(e,t,this);return this.channels.push(r),r}},{key:"push",value:function(e){var t=this,r=e.topic,n=e.event,o=e.payload,i=e.ref,a=function(){t.encode(e,(function(e){var r;null===(r=t.conn)||void 0===r||r.send(e)}))};this.log("push","".concat(r," ").concat(n," (").concat(i,")"),o),this.isConnected()?a():this.sendBuffer.push(a)}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,(function(e){var r=e.topic,n=e.event,o=e.payload,i=e.ref;i&&i===t.pendingHeartbeatRef?t.pendingHeartbeatRef=null:n===(null==o?void 0:o.type)&&t._resetHeartbeat(),t.log("receive","".concat(o.status||""," ").concat(r," ").concat(n," ").concat(i&&"("+i+")"||""),o),t.channels.filter((function(e){return e.isMember(r)})).forEach((function(e){return e.trigger(n,o,i)})),t.stateChangeCallbacks.message.forEach((function(t){return t(e)}))}))}},{key:"endPointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_onConnOpen",value:function(){this.log("transport","connected to ".concat(this.endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this._resetHeartbeat(),this.stateChangeCallbacks.open.forEach((function(e){return e()}))}},{key:"_onConnClose",value:function(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(t){return t(e)}))}},{key:"_onConnError",value:function(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((function(t){return t(e)}))}},{key:"_triggerChanError",value:function(){this.channels.forEach((function(e){return e.trigger(wt.error)}))}},{key:"_appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}},{key:"_flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(e){return e()})),this.sendBuffer=[])}},{key:"_resetHeartbeat",value:function(){var e=this;this.pendingHeartbeatRef=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return e._sendHeartbeat()}),this.heartbeatIntervalMs)}},{key:"_sendHeartbeat",value:function(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}}]),e}(),Ht=function(){function e(t,r,n,o){ke(this,e);var i={},a="*"===o?"realtime:".concat(n):"realtime:".concat(n,":").concat(o),s=r.Authorization.split(" ")[1];s&&(i.user_token=s),this.subscription=t.channel(a,i)}return Te(e,[{key:"getPayloadRecords",value:function(e){var t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=xt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=xt(e.columns,e.old_record)),t}},{key:"on",value:function(e,t){var r=this;return this.subscription.on(e,(function(e){var n={schema:e.schema,table:e.table,commit_timestamp:e.commit_timestamp,eventType:e.type,new:{},old:{}};n=Object.assign(Object.assign({},n),r.getPayloadRecords(e)),t(n)})),this}},{key:"subscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.subscription.onError((function(t){return e("SUBSCRIPTION_ERROR",t)})),this.subscription.onClose((function(){return e("CLOSED")})),this.subscription.subscribe().receive("ok",(function(){return e("SUBSCRIBED")})).receive("error",(function(t){return e("SUBSCRIPTION_ERROR",t)})).receive("timeout",(function(){return e("RETRYING_AFTER_TIMEOUT")})),this.subscription}}]),e}();function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var Gt=function(e){Oe(r,e);var t=zt(r);function r(e,n){var o,i=n.headers,a=void 0===i?{}:i,s=n.schema,c=n.realtime,u=n.table;return ke(this,r),(o=t.call(this,e,{headers:a,schema:s}))._subscription=new Ht(c,a,s,u),o._realtime=c,o}return Te(r,[{key:"on",value:function(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription.on(e,t)}}]),r}(lt),qt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},Jt=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},Wt=function(e,t){if("function"!=typeof e.json)return t(e);e.json().then((function(r){return t({message:Jt(r),status:(null==e?void 0:e.status)||500})}))},Yt=function(e,t,r,n){var o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};function Kt(e,t,r,n,o){return qt(this,void 0,void 0,h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise((function(i,a){Ae()(t,Yt(e,r,n,o)).then((function(e){if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?i(e):e.json()})).then((function(e){return i(e)})).catch((function(e){return Wt(e,a)}))})));case 1:case"end":return i.stop()}}),i)})))}function Vt(e,t,r){return qt(this,void 0,void 0,h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Kt("GET",e,t,r));case 1:case"end":return n.stop()}}),n)})))}function Xt(e,t,r,n){return qt(this,void 0,void 0,h().mark((function o(){return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Kt("POST",e,r,n,t));case 1:case"end":return o.stop()}}),o)})))}function Qt(e,t,r,n){return qt(this,void 0,void 0,h().mark((function o(){return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Kt("PUT",e,r,n,t));case 1:case"end":return o.stop()}}),o)})))}function $t(e,t,r,n){return qt(this,void 0,void 0,h().mark((function o(){return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Kt("DELETE",e,r,n,t));case 1:case"end":return o.stop()}}),o)})))}var Zt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},er={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},rr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;ke(this,e),this.url=t,this.headers=r,this.bucketId=n}return Te(e,[{key:"uploadOrUpdate",value:function(e,t,r,n){return Zt(this,void 0,void 0,h().mark((function o(){var i,a,s,c,u,l;return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,a=Object.assign(Object.assign({},tr),n),s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)}),"undefined"!=typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",a.cacheControl),i.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(i=r).append("cacheControl",a.cacheControl):(i=r,s["cache-control"]="max-age=".concat(a.cacheControl),s["content-type"]=a.contentType),c=this._getFinalPath(t),o.next=7,Ae()("".concat(this.url,"/object/").concat(c),{method:e,body:i,headers:s});case 7:if(!(u=o.sent).ok){o.next=12;break}return o.abrupt("return",{data:{Key:c},error:null});case 12:return o.next=14,u.json();case 14:return l=o.sent,o.abrupt("return",{data:null,error:l});case 16:o.next=21;break;case 18:return o.prev=18,o.t0=o.catch(0),o.abrupt("return",{data:null,error:o.t0});case 21:case"end":return o.stop()}}),o,this,[[0,18]])})))}},{key:"upload",value:function(e,t,r){return Zt(this,void 0,void 0,h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("POST",e,t,r));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"update",value:function(e,t,r){return Zt(this,void 0,void 0,h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("PUT",e,t,r));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"move",value:function(e,t){return Zt(this,void 0,void 0,h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Xt("".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers});case 3:return n=r.sent,r.abrupt("return",{data:n,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 10:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"createSignedUrl",value:function(e,t){return Zt(this,void 0,void 0,h().mark((function r(){var n,o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this._getFinalPath(e),r.next=4,Xt("".concat(this.url,"/object/sign/").concat(n),{expiresIn:t},{headers:this.headers});case 4:return o=r.sent,i="".concat(this.url).concat(o.signedURL),o={signedURL:i},r.abrupt("return",{data:o,error:null,signedURL:i});case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0,signedURL:null});case 13:case"end":return r.stop()}}),r,this,[[0,10]])})))}},{key:"download",value:function(e){return Zt(this,void 0,void 0,h().mark((function t(){var r,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this._getFinalPath(e),t.next=4,Vt("".concat(this.url,"/object/").concat(r),{headers:this.headers,noResolveJson:!0});case 4:return n=t.sent,t.next=7,n.blob();case 7:return o=t.sent,t.abrupt("return",{data:o,error:null});case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 14:case"end":return t.stop()}}),t,this,[[0,11]])})))}},{key:"getPublicUrl",value:function(e){try{var t=this._getFinalPath(e),r="".concat(this.url,"/object/public/").concat(t);return{data:{publicURL:r},error:null,publicURL:r}}catch(n){return{data:null,error:n,publicURL:null}}}},{key:"remove",value:function(e){return Zt(this,void 0,void 0,h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$t("".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"list",value:function(e,t,r){return Zt(this,void 0,void 0,h().mark((function n(){var o,i;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object.assign(Object.assign(Object.assign({},er),t),{prefix:e||""}),n.next=4,Xt("".concat(this.url,"/object/list/").concat(this.bucketId),o,{headers:this.headers},r);case 4:return i=n.sent,n.abrupt("return",{data:i,error:null});case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 11:case"end":return n.stop()}}),n,this,[[0,8]])})))}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e)}}]),e}(),nr={"X-Client-Info":"storage-js/".concat("0.0.0")},or=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},ir=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ke(this,e),this.url=t,this.headers=Object.assign(Object.assign({},nr),r)}return Te(e,[{key:"listBuckets",value:function(){return or(this,void 0,void 0,h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vt("".concat(this.url,"/bucket"),{headers:this.headers});case 3:return t=e.sent,e.abrupt("return",{data:t,error:null});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{data:null,error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getBucket",value:function(e){return or(this,void 0,void 0,h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Vt("".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"createBucket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return or(this,void 0,void 0,h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Xt("".concat(this.url,"/bucket"),{id:e,name:e,public:t.public},{headers:this.headers});case 3:return n=r.sent,r.abrupt("return",{data:n.name,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 10:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"updateBucket",value:function(e,t){return or(this,void 0,void 0,h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Qt("".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public},{headers:this.headers});case 3:return n=r.sent,r.abrupt("return",{data:n,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 10:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"emptyBucket",value:function(e){return or(this,void 0,void 0,h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Xt("".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"deleteBucket",value:function(e){return or(this,void 0,void 0,h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$t("".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}();function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var sr=function(e){Oe(r,e);var t=ar(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ke(this,r),t.call(this,e,n)}return Te(r,[{key:"from",value:function(e){return new rr(this.url,this.headers,e)}}]),r}(ir),cr=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},ur={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ee},lr=function(){function e(t,r,n){if(ke(this,e),this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");t=t.replace(/\/$/,"");var o=Object.assign(Object.assign({},ur),n);this.restUrl="".concat(t,"/rest/v1"),this.realtimeUrl="".concat(t,"/realtime/v1").replace("http","ws"),this.authUrl="".concat(t,"/auth/v1"),this.storageUrl="".concat(t,"/storage/v1"),this.schema=o.schema,this.auth=this._initSupabaseAuthClient(o),this.realtime=this._initRealtimeClient(o.realtime)}return Te(e,[{key:"storage",get:function(){return new sr(this.storageUrl,this._getAuthHeaders())}},{key:"from",value:function(e){var t="".concat(this.restUrl,"/").concat(e);return new Gt(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e})}},{key:"rpc",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.head,o=void 0!==n&&n,i=r.count,a=void 0===i?null:i,s=this._initPostgRESTClient();return s.rpc(e,t,{head:o,count:a})}},{key:"removeSubscription",value:function(e){var t=this;return new Promise((function(r){return cr(t,void 0,void 0,h().mark((function t(){var n,o,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._closeSubscription(e);case 3:if(n=this.getSubscriptions().length){t.next=11;break}return t.next=7,this.realtime.disconnect();case 7:if(o=t.sent,!(i=o.error)){t.next=11;break}return t.abrupt("return",r({error:i}));case 11:return t.abrupt("return",r({error:null,data:{openSubscriptions:n}}));case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",r({error:t.t0}));case 17:case"end":return t.stop()}}),t,this,[[0,14]])})))}))}},{key:"_closeSubscription",value:function(e){return cr(this,void 0,void 0,h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isClosed()){t.next=3;break}return t.next=3,this._closeChannel(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getSubscriptions",value:function(){return this.realtime.channels}},{key:"_initSupabaseAuthClient",value:function(e){var t=e.autoRefreshToken,r=e.persistSession,n=e.detectSessionInUrl,o=e.localStorage,i=e.headers,a={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new rt({url:this.authUrl,headers:Object.assign(Object.assign({},i),a),autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,localStorage:o})}},{key:"_initRealtimeClient",value:function(e){return new Ft(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},null==e?void 0:e.params),{apikey:this.supabaseKey})}))}},{key:"_initPostgRESTClient",value:function(){return new yt(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema})}},{key:"_getAuthHeaders",value:function(){var e,t,r=Ee,n=null!==(t=null===(e=this.auth.session())||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey;return r.apikey=this.supabaseKey,r.Authorization="Bearer ".concat(n),r}},{key:"_closeChannel",value:function(e){var t=this;return new Promise((function(r,n){e.unsubscribe().receive("ok",(function(){return t.realtime.remove(e),r(!0)})).receive("error",(function(e){return n(e)}))}))}}]),e}(),fr=function(e,t,r){return new lr(e,t,r)}("https://coinnqngrwlwlfhwtkih.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNTI0Nzg1MCwiZXhwIjoxOTUwODIzODUwfQ.bsG7ieEq9-tpfwACvQ_T-5DTU-xWyX2fWb3JezQFqdg"),hr=function(){var e=a(h().mark((function e(t,r,n){var o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.from("scores").upsert([{score:n,user_id:t,session_name:r,updated_at:new Date}]);case 2:if(o=e.sent,!(i=o.error)||Array.isArray(i)){e.next=6;break}throw new Error(JSON.stringify(i));case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),dr=function(){var e=a(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.from("scores").delete().match({session_name:t});case 2:if(r=e.sent,!(n=r.error)||Array.isArray(n)){e.next=6;break}throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pr=function(){var e=a(h().mark((function e(t,r){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.from("scores").update({revealed:r}).eq("session_name",t);case 2:if(n=e.sent,!(o=n.error)||Array.isArray(o)){e.next=6;break}throw new Error(JSON.stringify(o));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),vr=function(){var e=a(h().mark((function e(t){var r,n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.from("scores").select("user_id,score").eq("session_name",t);case 2:if(r=e.sent,n=r.data,!(o=r.error)||Array.isArray(o)){e.next=7;break}throw new Error(JSON.stringify(o));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mr=function(){var e=a(h().mark((function e(t,r){var n,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.from("users").insert([{name:t,session_name:r}]);case 2:if(n=e.sent,o=n.data,!(i=n.error)||Array.isArray(i)){e.next=7;break}throw new Error(JSON.stringify(i));case 7:return e.abrupt("return",o[0]);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),yr=function(){var e=a(h().mark((function e(t,r,n){var o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fr.from("users").update({last_presence:n,session_name:r}).eq("id",t);case 4:if(o=e.sent,!(i=o.error)||Array.isArray(i)){e.next=8;break}throw new Error(JSON.stringify(i));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),gr=function(){var e=a(h().mark((function e(t){var r,n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.from("users").select("*").eq("session_name",t);case 2:if(r=e.sent,n=r.data,!(o=r.error)||Array.isArray(o)){e.next=7;break}throw new Error(JSON.stringify(o));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(){var e=a(h().mark((function e(t){var r,n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fr.from("users").select("*").eq("id",t);case 4:if(r=e.sent,n=r.data,!(o=r.error)||Array.isArray(o)){e.next=9;break}throw new Error(JSON.stringify(o));case 9:if(!((null==n?void 0:n.length)>0)){e.next=11;break}return e.abrupt("return",n[(null==n?void 0:n.length)-1]);case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function wr(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=wr(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function kr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=wr(e))&&(n&&(n+=" "),n+=t);return n}var xr=r(3935);function Tr(){return Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tr.apply(this,arguments)}function Er(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function _r(e){return"number"==typeof e&&!isNaN(e)}function Or(e){return"boolean"==typeof e}function Sr(e){return"string"==typeof e}function jr(e){return"function"==typeof e}function Pr(e){return Sr(e)||jr(e)?e:null}function Cr(e){return 0===e||e}var Ar=!("undefined"==typeof window||!window.document||!window.document.createElement);function Rr(e){return(0,n.isValidElement)(e)||Sr(e)||jr(e)||_r(e)}var Ir={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Nr={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function Lr(e){var t=e.enter,r=e.exit,o=e.appendPosition,i=void 0!==o&&o,a=e.collapse,s=void 0===a||a,c=e.collapseDuration,u=void 0===c?300:c;return function(e){var o=e.children,a=e.position,c=e.preventExitTransition,l=e.done,f=e.nodeRef,h=e.isIn,d=i?t+"--"+a:t,p=i?r+"--"+a:r,v=(0,n.useRef)(),m=(0,n.useRef)(0);function y(e){if(e.target===f.current){var t=f.current;t.removeEventListener("animationend",y),0===m.current&&(t.className=v.current)}}function g(){var e=f.current;e.removeEventListener("animationend",g),s?function(e,t,r){void 0===r&&(r=300);var n=e.scrollHeight,o=e.style;requestAnimationFrame((function(){o.minHeight="initial",o.height=n+"px",o.transition="all "+r+"ms",requestAnimationFrame((function(){o.height="0",o.padding="0",o.margin="0",setTimeout(t,r)}))}))}(e,l,u):l()}return(0,n.useLayoutEffect)((function(){var e;e=f.current,v.current=e.className,e.className+=" "+d,e.addEventListener("animationend",y)}),[]),(0,n.useEffect)((function(){h||(c?g():function(){m.current=1;var e=f.current;e.className+=" "+p,e.addEventListener("animationend",g)}())}),[h]),n.createElement(n.Fragment,null,o)}}var Ur={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var r=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.list.has(e)&&this.list.get(e).forEach((function(r){var o=setTimeout((function(){r.apply(void 0,n)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(o)}))}};function Dr(e,t){void 0===t&&(t=!1);var r=(0,n.useRef)(e);return(0,n.useEffect)((function(){t&&(r.current=e)})),r.current}function Br(e,t){switch(t.type){case 0:return[].concat(e,[t.toastId]).filter((function(e){return e!==t.staleId}));case 1:return Cr(t.toastId)?e.filter((function(e){return e!==t.toastId})):[]}}var Mr=["delay","staleId"];function Fr(e){var t=(0,n.useReducer)((function(e){return e+1}),0)[1],r=(0,n.useReducer)(Br,[]),o=r[0],i=r[1],a=(0,n.useRef)(null),s=Dr(0),c=Dr([]),u=Dr({}),l=Dr({toastKey:1,displayedToast:0,props:e,containerId:null,isToastActive:f,getToast:function(e){return u[e]||null}});function f(e){return-1!==o.indexOf(e)}function h(e){var t=e.containerId;!l.props.limit||t&&l.containerId!==t||(s-=c.length,c=[])}function d(e){i({type:1,toastId:e})}function p(){var e=c.shift();m(e.toastContent,e.toastProps,e.staleId)}function v(e,r){var o,i=r.delay,f=r.staleId,h=Er(r,Mr);if(Rr(e)&&!function(e){var t=e.containerId,r=e.toastId,n=e.updateId;return!!(!a.current||l.props.enableMultiContainer&&t!==l.props.containerId||u[r]&&null==n)}(h)){var v=h.toastId,y=h.updateId,g=h.data,b=l.props,w=function(){return d(v)},k=null==h.updateId;k&&s++;var x,T,E={toastId:v,updateId:y,isLoading:h.isLoading,theme:h.theme||b.theme,icon:null!=(o=h.icon)?o:b.icon,isIn:!1,key:h.key||l.toastKey++,type:h.type,closeToast:w,closeButton:h.closeButton,rtl:b.rtl,position:h.position||b.position,transition:h.transition||b.transition,className:Pr(h.className||b.toastClassName),bodyClassName:Pr(h.bodyClassName||b.bodyClassName),style:h.style||b.toastStyle,bodyStyle:h.bodyStyle||b.bodyStyle,onClick:h.onClick||b.onClick,pauseOnHover:Or(h.pauseOnHover)?h.pauseOnHover:b.pauseOnHover,pauseOnFocusLoss:Or(h.pauseOnFocusLoss)?h.pauseOnFocusLoss:b.pauseOnFocusLoss,draggable:Or(h.draggable)?h.draggable:b.draggable,draggablePercent:_r(h.draggablePercent)?h.draggablePercent:b.draggablePercent,draggableDirection:h.draggableDirection||b.draggableDirection,closeOnClick:Or(h.closeOnClick)?h.closeOnClick:b.closeOnClick,progressClassName:Pr(h.progressClassName||b.progressClassName),progressStyle:h.progressStyle||b.progressStyle,autoClose:!h.isLoading&&(x=h.autoClose,T=b.autoClose,!1===x||_r(x)&&x>0?x:T),hideProgressBar:Or(h.hideProgressBar)?h.hideProgressBar:b.hideProgressBar,progress:h.progress,role:Sr(h.role)?h.role:b.role,deleteToast:function(){!function(e){delete u[e];var r=c.length;(s=Cr(e)?s-1:s-l.displayedToast)<0&&(s=0);if(r>0){var n=Cr(e)?1:l.props.limit;if(1===r||1===n)l.displayedToast++,p();else{var o=n>r?r:n;l.displayedToast=o;for(var i=0;i<o;i++)p()}}else t()}(v)}};jr(h.onOpen)&&(E.onOpen=h.onOpen),jr(h.onClose)&&(E.onClose=h.onClose),"y"===E.draggableDirection&&80===E.draggablePercent&&(E.draggablePercent*=1.5);var _=b.closeButton;!1===h.closeButton||Rr(h.closeButton)?_=h.closeButton:!0===h.closeButton&&(_=!Rr(b.closeButton)||b.closeButton),E.closeButton=_;var O=e;(0,n.isValidElement)(e)&&!Sr(e.type)?O=(0,n.cloneElement)(e,{closeToast:w,toastProps:E,data:g}):jr(e)&&(O=e({closeToast:w,toastProps:E,data:g})),b.limit&&b.limit>0&&s>b.limit&&k?c.push({toastContent:O,toastProps:E,staleId:f}):_r(i)&&i>0?setTimeout((function(){m(O,E,f)}),i):m(O,E,f)}}function m(e,t,r){var n=t.toastId;r&&delete u[r],u[n]={content:e,props:t},i({type:0,toastId:n,staleId:r})}return(0,n.useEffect)((function(){return l.containerId=e.containerId,Ur.cancelEmit(3).on(0,v).on(1,(function(e){return a.current&&d(e)})).on(5,h).emit(2,l),function(){return Ur.emit(3,l)}}),[]),(0,n.useEffect)((function(){l.isToastActive=f,l.displayedToast=o.length,Ur.emit(4,o.length,e.containerId)}),[o]),(0,n.useEffect)((function(){l.props=e})),{getToastToRender:function(t){for(var r={},n=e.newestOnTop?Object.keys(u).reverse():Object.keys(u),o=0;o<n.length;o++){var i=u[n[o]],a=i.props.position;r[a]||(r[a]=[]),r[a].push(i)}return Object.keys(r).map((function(e){return t(e,r[e])}))},collection:u,containerRef:a,isToastActive:f}}function Hr(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function zr(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Gr(e){var t=(0,n.useState)(!0),r=t[0],o=t[1],i=(0,n.useState)(!1),a=i[0],s=i[1],c=(0,n.useRef)(null),u=Dr({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null}),l=Dr(e,!0),f=e.autoClose,h=e.pauseOnHover,d=e.closeToast,p=e.onClick,v=e.closeOnClick;function m(t){if(e.draggable){var r=c.current;u.canCloseOnClick=!0,u.canDrag=!0,u.boundingRect=r.getBoundingClientRect(),r.style.transition="",u.x=Hr(t.nativeEvent),u.y=zr(t.nativeEvent),"x"===e.draggableDirection?(u.start=u.x,u.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(u.start=u.y,u.removalDistance=r.offsetHeight*(e.draggablePercent/100))}}function y(){if(u.boundingRect){var t=u.boundingRect,r=t.top,n=t.bottom,o=t.left,i=t.right;e.pauseOnHover&&u.x>=o&&u.x<=i&&u.y>=r&&u.y<=n?b():g()}}function g(){o(!0)}function b(){o(!1)}function w(t){if(u.canDrag){t.preventDefault();var n=c.current;r&&b(),u.x=Hr(t),u.y=zr(t),"x"===e.draggableDirection?u.delta=u.x-u.start:u.delta=u.y-u.start,u.start!==u.x&&(u.canCloseOnClick=!1),n.style.transform="translate"+e.draggableDirection+"("+u.delta+"px)",n.style.opacity=""+(1-Math.abs(u.delta/u.removalDistance))}}function k(){var t=c.current;if(u.canDrag){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance)return s(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,n.useEffect)((function(){return jr(e.onOpen)&&e.onOpen((0,n.isValidElement)(e.children)&&e.children.props),function(){jr(l.onClose)&&l.onClose((0,n.isValidElement)(l.children)&&l.children.props)}}),[]),(0,n.useEffect)((function(){return e.draggable&&(document.addEventListener("mousemove",w),document.addEventListener("mouseup",k),document.addEventListener("touchmove",w),document.addEventListener("touchend",k)),function(){e.draggable&&(document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",k))}}),[e.draggable]),(0,n.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||b();window.addEventListener("focus",g),window.addEventListener("blur",b)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",b))}}),[e.pauseOnFocusLoss]);var x={onMouseDown:m,onTouchStart:m,onMouseUp:y,onTouchEnd:y};return f&&h&&(x.onMouseEnter=b,x.onMouseLeave=g),v&&(x.onClick=function(e){p&&p(e),u.canCloseOnClick&&d()}),{playToast:g,pauseToast:b,isRunning:r,preventExitTransition:a,toastRef:c,eventHandlers:x}}function qr(e){var t=e.closeToast,r=e.theme,o=e.ariaLabel,i=void 0===o?"close":o;return(0,n.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+r,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":i},(0,n.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,n.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Jr(e){var t,r,o=e.delay,i=e.isRunning,a=e.closeToast,s=e.type,c=e.hide,u=e.className,l=e.style,f=e.controlledProgress,h=e.progress,d=e.rtl,p=e.isIn,v=e.theme,m=Tr({},l,{animationDuration:o+"ms",animationPlayState:i?"running":"paused",opacity:c?0:1});f&&(m.transform="scaleX("+h+")");var y=kr("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+v,"Toastify__progress-bar--"+s,((t={})["Toastify__progress-bar--rtl"]=d,t)),g=jr(u)?u({rtl:d,type:s,defaultClassName:y}):kr(y,u),b=((r={})[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]=f&&h<1?null:function(){p&&a()},r);return(0,n.createElement)("div",Object.assign({role:"progressbar","aria-hidden":c?"true":"false","aria-label":"notification timer",className:g,style:m},b))}Jr.defaultProps={type:Nr.DEFAULT,hide:!1};var Wr=["theme","type"],Yr=function(e){var t=e.theme,r=e.type,o=Er(e,Wr);return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+r+")"},o))};var Kr={info:function(e){return n.createElement(Yr,Object.assign({},e),n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return n.createElement(Yr,Object.assign({},e),n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return n.createElement(Yr,Object.assign({},e),n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return n.createElement(Yr,Object.assign({},e),n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return n.createElement("div",{className:"Toastify__spinner"})}},Vr=function(e){var t,r,o=Gr(e),i=o.isRunning,a=o.preventExitTransition,s=o.toastRef,c=o.eventHandlers,u=e.closeButton,l=e.children,f=e.autoClose,h=e.onClick,d=e.type,p=e.hideProgressBar,v=e.closeToast,m=e.transition,y=e.position,g=e.className,b=e.style,w=e.bodyClassName,k=e.bodyStyle,x=e.progressClassName,T=e.progressStyle,E=e.updateId,_=e.role,O=e.progress,S=e.rtl,j=e.toastId,P=e.deleteToast,C=e.isIn,A=e.isLoading,R=e.icon,I=e.theme,N=kr("Toastify__toast","Toastify__toast-theme--"+I,"Toastify__toast--"+d,((t={})["Toastify__toast--rtl"]=S,t)),L=jr(g)?g({rtl:S,position:y,type:d,defaultClassName:N}):kr(N,g),U=!!O,D=Kr[d],B={theme:I,type:d},M=D&&D(B);return!1===R?M=void 0:jr(R)?M=R(B):(0,n.isValidElement)(R)?M=(0,n.cloneElement)(R,B):Sr(R)?M=R:A&&(M=Kr.spinner()),(0,n.createElement)(m,{isIn:C,done:P,position:y,preventExitTransition:a,nodeRef:s},(0,n.createElement)("div",Object.assign({id:j,onClick:h,className:L},c,{style:b,ref:s}),(0,n.createElement)("div",Object.assign({},C&&{role:_},{className:jr(w)?w({type:d}):kr("Toastify__toast-body",w),style:k}),M&&(0,n.createElement)("div",{className:kr("Toastify__toast-icon",(r={},r["Toastify--animate-icon Toastify__zoom-enter"]=!A,r))},M),(0,n.createElement)("div",null,l)),function(e){if(e){var t={closeToast:v,type:d,theme:I};return jr(e)?e(t):(0,n.isValidElement)(e)?(0,n.cloneElement)(e,t):void 0}}(u),(f||U)&&(0,n.createElement)(Jr,Object.assign({},E&&!U?{key:"pb-"+E}:{},{rtl:S,theme:I,delay:f,isRunning:i,isIn:C,closeToast:v,hide:p,type:d,style:T,className:x,controlledProgress:U,progress:O}))))},Xr=Lr({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),Qr=function(e){var t=Fr(e),r=t.getToastToRender,o=t.containerRef,i=t.isToastActive,a=e.className,s=e.style,c=e.rtl,u=e.containerId;function l(e){var t,r=kr("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=c,t));return jr(a)?a({position:e,rtl:c,defaultClassName:r}):kr(r,Pr(a))}return(0,n.createElement)("div",{ref:o,className:"Toastify",id:u},r((function(e,t){var r=0===t.length?Tr({},s,{pointerEvents:"none"}):Tr({},s);return(0,n.createElement)("div",{className:l(e),style:r,key:"container-"+e},t.map((function(e){var t=e.content,r=e.props;return(0,n.createElement)(Vr,Object.assign({},r,{isIn:i(r.toastId),key:"toast-"+r.key,closeButton:!0===r.closeButton?qr:r.closeButton}),t)})))})))};Qr.defaultProps={position:Ir.TOP_RIGHT,transition:Xr,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:qr,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var $r,Zr,en,tn=new Map,rn=[],nn=!1;function on(){return Math.random().toString(36).substr(2,9)}function an(e){return e&&(Sr(e.toastId)||_r(e.toastId))?e.toastId:on()}function sn(e,t){return tn.size>0?Ur.emit(0,e,t):(rn.push({content:e,options:t}),nn&&Ar&&(nn=!1,Zr=document.createElement("div"),document.body.appendChild(Zr),(0,xr.render)((0,n.createElement)(Qr,Object.assign({},en)),Zr))),t.toastId}function cn(e,t){return Tr({},t,{type:t&&t.type||e,toastId:an(t)})}var un=function(e){return function(t,r){return sn(t,cn(e,r))}},ln=function(e,t){return sn(e,cn(Nr.DEFAULT,t))};ln.loading=function(e,t){return sn(e,cn(Nr.DEFAULT,Tr({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},ln.promise=function(e,t,r){var n=t.pending,o=t.error,i=t.success,a=Sr(n)?ln.loading(n,r):ln.loading(n.render,Tr({},r,n)),s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=function(e,t,n){var o=Sr(t)?{render:t}:t;return ln.update(a,Tr({type:e},s,r,o,{data:n})),n},u=jr(e)?e():e;return u.then((function(e){return c("success",i,e)})).catch((function(e){return c("error",o,e)})),u},ln.success=un(Nr.SUCCESS),ln.info=un(Nr.INFO),ln.error=un(Nr.ERROR),ln.warn=ln.warning=un(Nr.WARNING),ln.dark=function(e,t){return sn(e,cn(Nr.DEFAULT,Tr({theme:"dark"},t)))},ln.dismiss=function(e){return Ur.emit(1,e)},ln.clearWaitingQueue=function(e){return void 0===e&&(e={}),Ur.emit(5,e)},ln.isActive=function(e){var t=!1;return tn.forEach((function(r){r.isToastActive&&r.isToastActive(e)&&(t=!0)})),t},ln.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var r=function(e,t){var r=t.containerId,n=tn.get(r||$r);return n?n.getToast(e):null}(e,t);if(r){var n=r.props,o=r.content,i=Tr({},n,t,{toastId:t.toastId||e,updateId:on()});i.toastId!==e&&(i.staleId=e);var a=i.render||o;delete i.render,sn(a,i)}}),0)},ln.done=function(e){ln.update(e,{progress:1})},ln.onChange=function(e){return jr(e)&&Ur.on(4,e),function(){jr(e)&&Ur.off(4,e)}},ln.configure=function(e){void 0===e&&(e={}),nn=!0,en=e},ln.POSITION=Ir,ln.TYPE=Nr,Ur.on(2,(function(e){$r=e.containerId||e,tn.set($r,e),rn.forEach((function(e){Ur.emit(0,e.content,e.options)})),rn=[]})).on(3,(function(e){tn.delete(e.containerId||e),0===tn.size&&Ur.off(0).off(1).off(5),Ar&&Zr&&document.body.removeChild(Zr)}));var fn=function(e){var t=e.session,r=e.showScores,o=e.toggleScores,i=n.useState(!1),a=i[0],s=i[1];n.useEffect((function(){a&&ln("Enabled Moderator controls!")}),[a]);var c=n.useCallback((function(){o(!1),dr(t)}),[t,o]);return a?n.createElement("div",{className:"moderatorcontrols-module--actions--2Ma3w"},n.createElement("div",{className:"moderatorcontrols-module--reveal--3tDAv",onClick:function(){return window.confirm((r?"Hide":"Reveal")+" all cards?")&&o(!0)}},r?"Hide":"Reveal"),n.createElement("div",{className:"moderatorcontrols-module--reset--2GLla",onClick:function(){return window.confirm("Reset all cards?")&&c()}},"Reset")):n.createElement("span",{className:"moderatorcontrols-module--moderator_notice--N7WA1",onClick:function(){return s(!0)}},"click to enable moderator controls")},hn=function(e){var t=e.options,r=e.session;return n.createElement("div",{className:"scorecards-module--card_container--2U8FE"},n.createElement("div",{className:"scorecards-module--options--IIO33"},t.map((function(e){return n.createElement("div",{key:e,className:"scorecards-module--card--15p5y",onClick:function(){return t=e,void((n=JSON.parse(localStorage.getItem("user"))).id&&hr(n.id,r,t));var t,n}},e)}))))},dn="userlist-module--score--1-Q5s",pn=function(e){var t=e.me,r=e.users,o=e.scores,i={};null==o||o.forEach((function(e){i[e.user_id]=e})),null==r||r.sort((function(e,t){return e.id.localeCompare(t.id)}));var a=function(e){var t=e.isMe,r=e.score;return r?r.revealed||t?n.createElement("div",{className:dn},r.score):n.createElement("div",{className:dn},"?"):n.createElement("div",{className:dn},"-")},s=function(e){var r=e.user,o=r.id===(null==t?void 0:t.id),s=i[r.id];return n.createElement("div",{key:r.id,className:"userlist-module--user--1Q429"},n.createElement("div",{className:"userlist-module--name--15GIS "+(o&&"userlist-module--me--BV3tR"),onClick:function(){return o&&window.confirm("Reset your name?")&&void("undefined"!=typeof window&&(localStorage.removeItem("user"),window.location.reload()))}},r.name," ",o&&"(You)"),n.createElement("div",{className:"userlist-module--card--3Tg5w userlist-module--no_hover--1IPXw"},n.createElement(a,{isMe:o,score:s})))};return n.createElement("div",{className:"userlist-module--user_list--kXU1P"},null==r?void 0:r.map((function(e){return n.createElement(s,{key:e.id,user:e})})))};var vn=function(e){var t=e.session,r=e.user,i=n.useState(),s=i[0],c=i[1],u=n.useState([]),l=u[0],f=u[1],d=n.useState([]),p=d[0],v=d[1],m=n.useState(!1),y=m[0],g=m[1],b=function(){var e=a(h().mark((function e(t){var r,n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(t);case 2:r=e.sent,n=new Date,30,o=r.filter((function(e){return t=e.last_presence,r=t.split(/\D+/),new Date(Date.UTC(r[0],--r[1],r[2],r[3],r[4],r[5],r[6]))>n.setSeconds(n.getSeconds()-30);var t,r})),f(o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=a(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yr(r.id,t,(new Date).toISOString());case 2:return e.next=4,b(t);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=a(h().mark((function e(t,r){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(r.id);case 2:if(!(n=e.sent)){e.next=6;break}return c(n),e.abrupt("return");case 6:return e.next=8,mr(r.name,t);case 8:o=e.sent,c(o);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t);case 2:r=e.sent,v(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.useEffect((function(){var e,r=(e=function(e){"DELETE"===e.eventType?function(e){var t,r=null===(t=e.old)||void 0===t?void 0:t.user_id;v((function(e){return(0,o.Z)(e.filter((function(e){return e.user_id!==r})))}))}(e):function(e){var t,r,n,i,a=null===(t=e.new)||void 0===t?void 0:t.user_id,s={user_id:null===(r=e.new)||void 0===r?void 0:r.user_id,score:null===(n=e.new)||void 0===n?void 0:n.score,revealed:null===(i=e.new)||void 0===i?void 0:i.revealed};v((function(e){return[].concat((0,o.Z)(e.filter((function(e){return e.user_id!==a}))),[s])}))}(e)},fr.from("scores").on("*",(function(t){console.log("Change received!",t),e(t)})).subscribe());return x(t),function(){return e=r,void fr.removeSubscription(e);var e}}),[t]),n.useEffect((function(){k(t,r)}),[t,r]),n.useEffect((function(){b(t),null!=s&&s.id&&localStorage.setItem("user",JSON.stringify(s))}),[t,s]),n.useEffect((function(){if(s){var e=setInterval((function(){w(t,s)}),1e4);return w(t,s),function(){return clearInterval(e)}}}),[s,t]),n.useEffect((function(){var e=function(){return w(t,s)};return window.addEventListener("focus",e),function(){return window.removeEventListener("focus",e)}}),[s,t]);var T=n.useCallback((function(e){void 0===e&&(e=!0),console.log("Toggling scores",!y),e&&pr(t,!y),g(!y)}),[t,y]);return n.createElement(n.Fragment,null,n.createElement(we,null,n.createElement("title",null,"Planning Poker - ",t)),n.createElement(pn,{me:s,users:l,scores:p}),n.createElement(hn,{session:t,options:[0,1,2,3,5,8,13,21]}),n.createElement(fn,{session:t,showScores:y,toggleScores:T}))},mn=function(){var e=n.useState(""),t=e[0],r=e[1],o=n.useState({}),i=o[0],a=o[1],s=function(){r(window.location.hash.slice(1))};n.useEffect((function(){return window.addEventListener("hashchange",s),s(),function(){var e=JSON.parse(localStorage.getItem("user"));if(e)a(e);else{for(var t="";""===t||!t;)t=prompt("Please enter your name");a({name:t})}}(),function(){return window.removeEventListener("hashchange",s)}}),[]),n.useEffect((function(){i!=={}&&localStorage.setItem("user",JSON.stringify(i))}),[i]);return n.createElement("div",{className:"hero-module--content--2VuI9 "+(t?"":"has_session")},n.createElement("h1",null,"Planning Poker"),t?n.createElement(vn,{user:i,session:t}):n.createElement("a",{onClick:function(){"undefined"!=typeof window&&(window.location.href+="#"+function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",r=crypto.getRandomValues(new Uint8Array(e));e--;){var n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t}(7))},className:"hero-module--new_session--2kXOk"},"Start new session"))},yn=function(){var e=n.useState(!0),t=e[0],r=e[1];n.useEffect((function(){var e=JSON.parse(window.localStorage.getItem("prefers-dark-mode"));null===e&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches),r(e)}),[]),n.useEffect((function(){t?(document.documentElement.classList.add("dark"),document.documentElement.setAttribute("data-theme","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light"))}),[t]);var o=function(){r(!t),window.localStorage.setItem("prefers-dark-mode",JSON.stringify(!t))};return n.createElement("div",{id:"dm-toggle",className:"styles-module--darkmode_toggle--1rrCa "+(t?"styles-module--is_dark--2jAa7":""),onClick:function(){return o()},onKeyPress:function(){return o()},tabIndex:"0","aria-label":"Toggle darkmode",role:"button"})},gn=function(){return n.createElement("div",{className:"styles-module--footer---eRqn"},n.createElement("a",{href:"https://github.com/psykzz/planning-poker"},"source")," | made by psykzz")},bn=function(e){var t=e.children;return n.createElement(n.Fragment,null,n.createElement(we,null,n.createElement("title",null,"Planning Poker")),n.createElement("div",{className:"layout-module--container--1nb9j"},t),n.createElement(gn,null),n.createElement(yn,null),n.createElement(Qr,{hideProgressBar:!0,pauseOnHover:!1,position:"bottom-right"}))},wn=function(){return n.createElement(bn,null,n.createElement(mn,null))}},3076:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n=f;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?p:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=p,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var b={};c(b,i,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==r&&n.call(k,i)&&(b=k);var x=g.prototype=m.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return y.prototype=g,c(x,"constructor",g),c(g,"constructor",y),y.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},T(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(x),c(x,s,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},9794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=component---src-pages-index-jsx-6460fbc42ddd38322c23.js.map