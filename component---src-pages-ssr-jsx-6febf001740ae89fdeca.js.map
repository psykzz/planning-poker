{"version":3,"file":"component---src-pages-ssr-jsx-6febf001740ae89fdeca.js","mappings":"iMAsEA,EAnEqB,SAAH,GAAiC,IAA3BA,EAAU,EAAVA,WAAeC,ECHxB,SAAuCC,EAAQC,GAC5D,GAAc,MAAVD,EAAgB,MAAO,CAAC,EAC5B,IAEIE,EAAKC,EAFLC,EAAS,CAAC,EACVC,EAAaC,OAAOC,KAAKP,GAE7B,IAAKG,EAAI,EAAGA,EAAIE,EAAWG,OAAQL,IACjCD,EAAMG,EAAWF,GACbF,EAASQ,QAAQP,IAAQ,IAC7BE,EAAOF,GAAOF,EAAOE,IAEvB,OAAOE,CACT,CDR2C,MACzC,EAA8BM,EAAAA,WAAvBC,EAAO,KAAEC,EAAU,KAY1B,OAVAF,EAAAA,WAAgB,WAAO,IAAD,MACdG,EAAS,IAAIC,gBACnBD,EAAOE,IAAI,MAAsB,QAAjB,EAAEhB,EAAKc,OAAOG,WAAG,QAAI,GACrCH,EAAOE,IAAI,OAAwB,QAAlB,EAAEhB,EAAKc,OAAOI,YAAI,QAAI,IACvCJ,EAAOE,IAAI,MAAsB,QAAjB,EAAEhB,EAAKc,OAAOK,WAAG,QAAI,IACrCC,MAAM,qCAAqCN,GAAUO,MAAK,SAAAC,GAAG,OAC3DT,EAAWS,EAAIC,OAAO,GAE1B,GAAG,IAGD,gCACE,2BAAMC,KAAKC,UAAU1B,EAAY,KAAM,IACvC,2BACA,uBAAK2B,MAAO,CAAEC,SAAU,QAASC,WAAY,eAC1C7B,EAAW8B,MAAK,IAAG9B,EAAW+B,QAAO,IAAG/B,EAAWgC,SAEtD,2BACA,2BACE,sCACA,2BAAMnB,GAAWY,KAAKC,UAAUb,EAAS,KAAM,KAIvD,C","sources":["webpack://planning-poker/./src/pages/ssr.jsx","webpack://planning-poker/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"sourcesContent":["import React from 'react';\n\n// Component for rendering, doing nothing special.\nconst TestTemplate = ({ serverData, ...rest }) => {\n  const [apiData, setApiData] = React.useState();\n\n  React.useEffect(() => {\n    const params = new URLSearchParams();\n    params.set('age', rest.params.age ?? 5);\n    params.set('sage', rest.params.sage ?? 15);\n    params.set('swr', rest.params.swr ?? 30);\n    fetch(`https://poker.psykzz.dev/api/time?${params}`).then(res =>\n      setApiData(res.json())\n    );\n  }, []);\n\n  return (\n    <>\n      <pre>{JSON.stringify(serverData, null, 2)}</pre>\n      <hr />\n      <div style={{ fontSize: '10rem', fontFamily: 'sans-serif' }}>\n        {serverData.hours}:{serverData.minutes}:{serverData.seconds}\n      </div>\n      <hr />\n      <div>\n        <h4>API Time</h4>\n        <pre>{apiData && JSON.stringify(apiData, null, 2)}</pre>\n      </div>\n    </>\n  );\n};\n\nexport const getServerData = async ({ query }) => {\n  // Fetch some data\n  const params = new URLSearchParams();\n  params.set('age', query.age ?? 5);\n  params.set('sage', query.sage ?? 15);\n  params.set('swr', query.swr ?? 30);\n  const data = await (\n    await fetch(`https://poker.psykzz.dev/api/time?${params}`)\n  ).json();\n\n  // Process it\n  const now = new Date(data.datetime);\n\n  // Return object with optional { props, headers, status }\n  return {\n    props: {\n      time: data.utc_datetime,\n      hours: now.getHours(),\n      minutes: ('0' + now.getMinutes()).slice(-2),\n      seconds: ('0' + now.getSeconds()).slice(-2),\n\n      age: query.age ?? 5,\n      sage: query.sage ?? 15,\n      swr: query.swr ?? 30,\n    },\n\n    // Add cache control headers\n    // max-age == browser\n    // s-maxage == shared cache (CDN, etc)\n    // state-while-revalidate == time to serve stale request\n    headers: {\n      'Cache-Control': `public, max-age=${query.age ?? 5}, s-maxage=${\n        query.sage ?? 15\n      }, stale-while-revalidate=${query.swr ?? 30}`,\n    },\n  };\n};\n\nexport default TestTemplate;\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}"],"names":["serverData","rest","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","React","apiData","setApiData","params","URLSearchParams","set","age","sage","swr","fetch","then","res","json","JSON","stringify","style","fontSize","fontFamily","hours","minutes","seconds"],"sourceRoot":""}